(function(){var e={7269:function(e,t,s){"use strict";var o=s(9963),i=s(6252);function n(e,t,s,o,n,a){const r=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(r)}var a={name:"App",components:{},data(){return{}},methods:{scrollEvent(){scrollY<=10?this.showNav=!0:this.showNav=!1}},created(){},mounted(){document.addEventListener("scroll",this.scrollEvent)},unmounted(){document.removeEventListener("scroll",this.scrollEvent)}},r=s(3744);const l=(0,r.Z)(a,[["render",n]]);var c=l,d=s(2201);const m={class:"intro-background"},h={class:"u-clearfix u-sheet u-valign-middle u-sheet-1"},u={class:"u-align-center u-container-style u-expanded-width-md u-expanded-width-sm u-expanded-width-xs u-group u-shape-rectangle u-group-1",style:{"margin-top":"100px"}},g={key:0,class:"login-layout u-container-layout u-valign-middle u-container-layout-1"},p=(0,i._)("h2",{class:""},"시민이였던 내가 오늘은 마피아?!",-1),y={class:"fadeLogin"},f=(0,i._)("h1",{class:"u-custom-font u-text u-text-1 my-2"},"Login",-1),w=(0,i._)("p",{style:{"font-family":"'NeoDunggeunmo Code'"}},"갓 파 더",-1),b={class:"loginForm"},v={class:"router-nav-in"},C={class:"btn-size u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base",style:{"font-family":"'NeoDunggeunmo Code'"}},_={class:"router-nav-in"},S={class:"btn-size u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base",style:{"font-family":"'NeoDunggeunmo Code'"}};function I(e,t,s,n,a,r){return(0,i.wg)(),(0,i.iD)("div",m,[(0,i._)("div",h,[(0,i._)("div",u,[(0,i.Wm)(o.uT,{name:"loginFade"},{default:(0,i.w5)((()=>[a.showLogin?((0,i.wg)(),(0,i.iD)("div",g,[p,(0,i._)("div",y,[f,w,(0,i._)("div",b,[(0,i._)("p",null,[(0,i.wy)((0,i._)("input",{class:"signUpInput",type:"text",placeholder:"아이디 입력","onUpdate:modelValue":t[0]||(t[0]=e=>a.user.id=e)},null,512),[[o.nr,a.user.id]])]),(0,i._)("p",null,[(0,i.wy)((0,i._)("input",{class:"signUpInput",type:"password",onKeyup:t[1]||(t[1]=(0,o.D2)(((...e)=>r.confirm&&r.confirm(...e)),["enter"])),placeholder:"비밀번호 입력","onUpdate:modelValue":t[2]||(t[2]=e=>a.user.password=e)},null,544),[[o.nr,a.user.password]])])]),(0,i._)("div",null,[(0,i._)("div",v,[(0,i._)("div",C,[(0,i._)("button",{class:"learn-more",style:{height:"30px"},onClick:t[3]||(t[3]=(...e)=>r.confirm&&r.confirm(...e))}," login ")])]),(0,i._)("div",_,[(0,i._)("div",S,[(0,i._)("button",{class:"learn-more",style:{height:"30px"},onClick:t[4]||(t[4]=(...e)=>r.goToSignup&&r.goToSignup(...e))}," signup ")])])])])])):(0,i.kq)("",!0)])),_:1})])])])}var k=s(3907);const T="memberStore";var R={name:"LoginView",data(){return{user:{id:null,password:null},showLogin:!1}},computed:{...(0,k.rn)(T,["isLogin","isLoginError","userInfo"])},methods:{...(0,k.nv)(T,["userConfirm","getUserInfo"]),async confirm(){await this.userConfirm(this.user);let e=sessionStorage.getItem("access-token");this.isLogin&&(await this.getUserInfo(e),this.$router.push({name:"lobby"}))},goToSignup(){this.$router.push("/signup")}},mounted(){window.scrollTo({top:2e3,behavior:"instant"}),window.scrollTo({top:0,behavior:"smooth"}),setTimeout((()=>{this.showLogin=!0}),1e3)}};const D=(0,r.Z)(R,[["render",I]]);var N=D;const x={class:"signUpLayout"},E=(0,i._)("div",{class:"signUpChar"},null,-1),V={class:"sighUpPaper"},O=(0,i._)("div",{class:"signUpMsg"},[(0,i._)("h6",{class:"u-custom-font u-text u-text-1"},"GAME CHANNEL"),(0,i._)("h2",{class:"u-custom-font u-text u-text-2 my-2"},"MAFIA"),(0,i._)("h1",{class:"u-custom-font u-text u-text-1 my-2"},"SignUp")],-1),P={class:"signupForm"},M={class:"signUpBtn"};function L(e,t,s,n,a,r){return(0,i.wg)(),(0,i.iD)("div",x,[E,(0,i._)("div",V,[O,(0,i._)("div",P,[(0,i.wy)((0,i._)("input",{class:"signUpInput",type:"text",placeholder:"이름 입력","onUpdate:modelValue":t[0]||(t[0]=e=>a.user.userName=e)},null,512),[[o.nr,a.user.userName]]),(0,i.wy)((0,i._)("input",{class:"signUpInput",type:"text",placeholder:"아이디 입력","onUpdate:modelValue":t[1]||(t[1]=e=>a.user.id=e)},null,512),[[o.nr,a.user.id]]),(0,i.wy)((0,i._)("input",{class:"signUpInput",type:"password",placeholder:"비밀번호 입력","onUpdate:modelValue":t[2]||(t[2]=e=>a.user.password=e)},null,512),[[o.nr,a.user.password]]),(0,i.wy)((0,i._)("input",{class:"signUpInput",type:"password",placeholder:"비밀번호 확인","onUpdate:modelValue":t[3]||(t[3]=e=>a.userpwdConfirm=e)},null,512),[[o.nr,a.userpwdConfirm]]),(0,i.wy)((0,i._)("input",{class:"signUpInput",type:"email",placeholder:"이메일 입력","onUpdate:modelValue":t[4]||(t[4]=e=>a.user.email=e)},null,512),[[o.nr,a.user.email]]),(0,i.wy)((0,i._)("input",{class:"signUpInput",type:"text",placeholder:"닉네임 입력","onUpdate:modelValue":t[5]||(t[5]=e=>a.user.nickname=e)},null,512),[[o.nr,a.user.nickname]])]),(0,i._)("div",M,[(0,i._)("button",{class:"learn-more",onClick:t[6]||(t[6]=(...e)=>r.register&&r.register(...e)),style:{height:"30px"}}," 가입 "),(0,i._)("button",{class:"learn-more",onClick:t[7]||(t[7]=(...e)=>r.movePage&&r.movePage(...e)),style:{height:"30px"}}," go to login ")])])])}const U="memberStore";var j={name:"signUp",data(){return{user:{id:null,password:null,email:null,userName:null,nickname:null},userpwdConfirm:null,pwMatches:!0}},computed:{...(0,k.rn)(U,["isLogin","isLoginError","isSignupError"])},methods:{...(0,k.OI)(U,["SET_IS_SIGNUP_ERROR"]),...(0,k.nv)(U,["registerMember"]),validEmail:function(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)},pwCheck(){this.user.password===this.userpwdConfirm?this.pwMatches=!0:this.pwMatches=!1},async register(e){e.preventDefault(),this.pwCheck(),this.user.id.length<6?alert("ID 길이가 6자 이상이어야 합니다."):this.user.userName.length<2?alert("유저 이름이 2자 이상이어야 합니다."):this.user.nickname.length<2?alert("유저 닉네임이 2자 이상이어야 합니다."):this.pwMatches?this.validEmail(this.user.email)?(await this.registerMember(this.user),!1===this.isSignupError?(alert("회원가입 축하"),this.movePage()):alert("이미 가입된 아이디 입니다")):alert("이메일 양식이 올바르지 않습니다."):alert("비밀번호와 비밀번호 확인이 일치하지 않습니다.")},movePage(){this.$router.push({name:"login"})}}};const z=(0,r.Z)(j,[["render",L]]);var F=z,$=s(3577);const G={class:"bg-secondary lobby-background",style:{"padding-top":"20px"}},W={class:"w3-container w3-content lobby-undernavbar",style:{"max-width":"1400px"}},A={class:"w3-row"},J={class:"w3-col m8"},q={class:"w3-row"},B={class:"w3-col m12"},Z={class:""},H={id:"lobbyTop",class:"w3-container w3-card w3-round mx-5 my-3"},Y={class:"w3-container w3-roun my-3"},K=(0,i._)("i",{class:"fa fa-map-pin"},null,-1),Q=(0,i.Uk)("방검색 "),X=[K,Q],ee=(0,i._)("button",{type:"button",class:"w3-button w3-theme",style:{"font-family":"'NeoDunggeunmo Code'"}},[(0,i._)("a",{href:"/lobby",class:"text-deepdarkpurple",style:{"font-size":"20px"}},[(0,i._)("i",{class:"fa fa-refresh"}),(0,i.Uk)("새로고침")])],-1),te=(0,i._)("br",null,null,-1),se={id:"scroll",class:"overflow-auto",style:{height:"435px"}},oe=(0,i._)("div",{id:"lobbyMid",class:"w3-container w3-card w3-round sticky-top mx-5 py-3",style:{}},[(0,i._)("h4",{class:"mx-4 text-purple",style:{"font-size":"28px"}}," Activated Room List ")],-1),ie={class:"modal",id:"enterRoomModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",style:{"margin-top":"200px"}},ne={class:"modal-dialog"},ae={class:"modal-content lobbyModal"},re={class:"modal-header"},le={class:"modal-title",style:{color:"white","margin-left":"50px"}},ce=(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),de={class:"modal-body",style:{color:"white","margin-left":"50px"}},me=(0,i._)("p",null,"함께할 멤버",-1),he={class:"modal-footer"},ue=(0,i._)("button",{class:"w3-button w3-theme w3-white",style:{"font-family":"'NeoDunggeunmo Code'","font-size":"20px","border-radius":"4px"},"data-bs-dismiss":"modal"},[(0,i._)("i",{class:"fa fa-close"}),(0,i.Uk)("나가기 ")],-1),ge=(0,i._)("i",{class:"fa fa-arrow-right"},null,-1),pe=(0,i.Uk)("입장하기 "),ye=[ge,pe],fe=(0,i._)("br",null,null,-1),we={key:0,class:"w3-right w3-opacity"},be={id:"title",class:"px-4 text-purple"},ve={class:"px-4 text-purple"},Ce=(0,i._)("hr",{class:""},null,-1),_e=["onClick"],Se=(0,i._)("i",{class:"fa fa-pencil"},null,-1),Ie=(0,i.Uk)("들어가기 "),ke=[Se,Ie],Te={class:"w3-col m4"},Re=(0,i.uE)('<div id="notice" class="w3-round w3-center"><div class="w3-container" style="margin-left:30px;margin-right:70px;padding-top:24px;"><br><br><p class="my-1">Upcoming Events:</p><p class="my-1"><strong>시민이였던 내가 오늘은 마피아?!</strong></p><p class="my-1"><strong>release</strong></p><p class="my-1">8/19 13:00</p><p class="my-1">최종발표</p></div></div><br>',2),De={id:"scroll",class:"overflow-auto my-3",style:{height:"305px","margin-left":"50px","margin-right":"50px"}},Ne={id:"",class:"w3-center sticky-top lobbyFriendTitle"},xe={class:"w3-container my-3"},Ee={class:"brownColor"},Ve=(0,i.Uk)("Friend List"),Oe={class:"w3-container",style:{height:"400px"}},Pe={class:"brownColor",style:{"margin-top":"55px","margin-bottom":"35px"}},Me=["src"],Le=(0,i._)("br",null,null,-1);function Ue(e,t,s,n,a,r){const l=(0,i.up)("nav-header"),c=(0,i.up)("make-room"),d=(0,i.up)("I");return(0,i.wg)(),(0,i.iD)(i.HY,null,[a.showNav?((0,i.wg)(),(0,i.j4)(l,{key:0,class:"fixed-top",style:{"z-index":"1000"}})):(0,i.kq)("",!0),(0,i._)("div",G,[(0,i._)("div",W,[(0,i._)("div",A,[(0,i._)("div",J,[(0,i._)("div",q,[(0,i._)("div",B,[(0,i._)("div",Z,[(0,i._)("div",H,[(0,i._)("div",Y,[(0,i.wy)((0,i._)("input",{id:"searchBar",onKeyup:t[0]||(t[0]=(0,o.D2)((e=>r.searchRoom()),["enter"])),contenteditable:"true",type:"text",style:{opacity:"0.7"},class:"w3-border w3-padding w3-card",placeholder:"방 제목:","onUpdate:modelValue":t[1]||(t[1]=e=>a.searchRoomKeyword=e)},null,544),[[o.nr,a.searchRoomKeyword]]),(0,i._)("button",{onClick:t[2]||(t[2]=e=>r.searchRoom()),type:"button",class:"w3-button w3-theme text-deepdarkpurple",style:{"font-family":"'NeoDunggeunmo Code'","font-size":"20px"}},X),(0,i.Wm)(c,{class:"text-deepdarkpurple",style:{display:"inline"}}),ee])])])])]),te,(0,i._)("div",se,[oe,(0,i._)("div",ie,[(0,i._)("div",ne,[(0,i._)("div",ae,[(0,i._)("div",re,[(0,i._)("h3",le,(0,$.zw)(a.enterRoomData.roomTitle),1),ce]),(0,i._)("div",de,[me,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.members,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i._)("p",null,(0,$.zw)(e.nickname),1)])))),128)),a.enterRoomData.isPassword?(0,i.wy)(((0,i.wg)(),(0,i.iD)("input",{key:0,contenteditable:"true",type:"text",class:"w3-border w3-padding",placeholder:"비밀번호를 입력해주세요:","onUpdate:modelValue":t[3]||(t[3]=e=>a.password=e)},null,512)),[[o.nr,a.password]]):(0,i.kq)("",!0)]),(0,i._)("div",he,[ue,(0,i._)("button",{onClick:t[4]||(t[4]=e=>r.tryEnterRoom(a.enterRoomData)),class:"w3-button w3-theme w3-white",style:{"font-family":"'NeoDunggeunmo Code'","font-size":"20px","border-radius":"4px"},"data-bs-dismiss":"modal"},ye)])])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.roomList,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,id:"rooms",class:"w3-container w3-card w3-white w3-round mx-5 my-4"},[fe,e.ifPassword?((0,i.wg)(),(0,i.iD)("h3",we," 비밀방입니다 ")):(0,i.kq)("",!0),(0,i._)("h2",be,(0,$.zw)(e.roomTitle),1),(0,i._)("h3",ve,"("+(0,$.zw)(e.memberCnt)+" / 5)",1),Ce,(0,i._)("p",{class:"mx-3 text-deepdarkpurple","data-bs-toggle":"modal","data-bs-target":"#enterRoomModal",onClick:t=>r.openEnterRoom(e),style:{"font-family":"'NeoDunggeunmo Code'","font-size":"24px",cursor:"pointer"}},ke,8,_e)])))),128))])]),(0,i._)("div",Te,[Re,(0,i._)("div",De,[(0,i._)("div",Ne,[(0,i._)("div",xe,[(0,i._)("h3",Ee,[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[Ve])),_:1})])])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.friends,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"w3-center lobbyFriend"},[(0,i._)("div",Oe,[(0,i._)("h2",Pe,[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i._)("b",null,(0,$.zw)(e.nickname),1)])),_:2},1024)]),null!==e.imagePath?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"friendImage",style:{"border-radius":"10px"},src:"/homedesign/images/"+e.imagePath,alt:""},null,8,Me)):(0,i.kq)("",!0)])])))),128)),Le])])])])])],64)}s(6699);const je=(0,i._)("button",{type:"button",class:"w3-button w3-theme mx-3","data-bs-toggle":"modal","data-bs-target":"#makeRoomModal",style:{"font-family":"'NeoDunggeunmo Code'","font-size":"20px"}},[(0,i._)("i",{class:"fa fa-pencil"}),(0,i.Uk)("방만들기 ")],-1),ze={class:"modal",style:{"margin-top":"200px"},id:"makeRoomModal","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Fe={class:"modal-dialog",style:{"z-index":"10000000"}},$e={class:"modal-content lobbyModal",style:{"z-index":"1100"}},Ge=(0,i._)("div",{class:"modal-header"},[(0,i._)("h3",{class:"modal-title",style:{color:"white","margin-left":"50px"}}," 방만들기 "),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),We={class:"modal-body",style:{color:"white","margin-left":"50px"}},Ae=(0,i._)("p",null,"방 제목과 비밀번호를 설정해주세요",-1),Je=(0,i._)("br",null,null,-1),qe={class:"modal-footer"},Be=(0,i._)("button",{class:"w3-button w3-theme w3-white",style:{"font-family":"'NeoDunggeunmo Code'","font-size":"20px","border-radius":"4px"},"data-bs-dismiss":"modal"},[(0,i._)("i",{class:"fa fa-close"}),(0,i.Uk)("나가기")],-1),Ze=(0,i._)("i",{class:"fa fa-arrow-right"},null,-1),He=(0,i.Uk)("방만들기"),Ye=[Ze,He];function Ke(e,t,s,n,a,r){return(0,i.wg)(),(0,i.iD)("div",null,[je,(0,i._)("div",ze,[(0,i._)("div",Fe,[(0,i._)("div",$e,[Ge,(0,i._)("div",We,[Ae,(0,i.wy)((0,i._)("input",{contenteditable:"true",type:"text",class:"w3-border w3-padding",style:{color:"gray","font-family":"'NeoDunggeunmo Code'"},placeholder:"방 제목:","onUpdate:modelValue":t[0]||(t[0]=e=>a.subject=e)},null,512),[[o.nr,a.subject]]),Je,(0,i.wy)((0,i._)("input",{contenteditable:"true",type:"text",class:"w3-border w3-padding",style:{color:"gray","font-family":"'NeoDunggeunmo Code'"},placeholder:"비밀번호(선택):","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e)},null,512),[[o.nr,a.password]])]),(0,i._)("div",qe,[Be,(0,i._)("button",{onClick:t[2]||(t[2]=(...e)=>r.createRoom&&r.createRoom(...e)),class:"w3-button w3-theme w3-white",style:{"font-family":"'NeoDunggeunmo Code'","font-size":"20px","border-radius":"4px"},"data-bs-dismiss":"modal"},Ye)])])])])])}const Qe="roomdataStore",Xe="memberStore";var et={name:"MakeRoom",components:{},data(){return{num:1,hostId:"",subject:"",password:""}},computed:{...(0,k.Se)(Xe,["isLogin","checkUserInfo"])},methods:{...(0,k.nv)(Qe,["saveRoomTitle","saveIsCaptain","makeRoom"]),createRoom(){const e={hostId:this.checkUserInfo.id,roomTitle:this.subject,password:this.password,size:5};this.saveIsCaptain(!0),this.saveRoomTitle(this.subject),this.makeRoom(e)}},created(){}};const tt=(0,r.Z)(et,[["render",Ke]]);var st=tt;const ot={class:"navbar-outline"},it={class:"logo-in"},nt=(0,i._)("img",{src:"/homedesign/images/logo.png",style:{height:"100px",width:"100px","border-radius":"10px"},class:"u-logo-image u-logo-image-1"},null,-1),at=(0,i._)("div",null,null,-1),rt={class:"router-go"},lt={class:"router-nav-in"},ct=(0,i._)("button",{class:"learn-more nav-color",style:{height:"30px","font-size":"24px"}},"로비",-1),dt=(0,i._)("div",{class:"u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base",style:{"font-family":"'NeoDunggeunmo Code'"}},[(0,i._)("button",{class:"learn-more nav-color",style:{height:"30px","font-size":"24px"}},"마이페이지")],-1),mt=[dt],ht={class:"router-nav-in"},ut=(0,i._)("button",{class:"learn-more nav-color",style:{height:"30px","font-size":"24px"}},"로그아웃",-1);function gt(e,t,s,o,n,a){const r=(0,i.up)("router-link"),l=(0,i.up)("asd");return(0,i.wg)(),(0,i.iD)("div",ot,[(0,i._)("div",it,[(0,i._)("a",null,[(0,i.Wm)(r,{to:{name:"lobby"}},{default:(0,i.w5)((()=>[nt])),_:1})])]),at,(0,i._)("div",rt,[(0,i._)("div",lt,[(0,i.Wm)(r,{to:{name:"lobby"},class:"btn-size u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base",style:{"font-family":"'NeoDunggeunmo Code'"}},{default:(0,i.w5)((()=>[ct])),_:1})]),(0,i._)("div",{onClick:t[0]||(t[0]=(...e)=>a.goMyPage&&a.goMyPage(...e)),class:"router-nav-in"},mt),(0,i._)("div",ht,[(0,i.Wm)(l,{onClick:a.logout,style:{"font-family":"'NeoDunggeunmo Code'"}},{default:(0,i.w5)((()=>[ut])),_:1},8,["onClick"])])])])}const pt="memberStore",yt="mypageStore";var ft={name:"NavHeader",components:{},data(){return{num:1}},computed:{...(0,k.rn)(pt,["isLogin","userInfo","record","isLoginError","isSignupError"])},methods:{...(0,k.OI)(pt,["SET_IS_LOGIN","SET_USER_INFO"]),...(0,k.OI)(yt,["SET_FRIENDS"]),logout(){console.log(this.userInfo),this.SET_USER_INFO(null),this.SET_IS_LOGIN(!1),this.SET_FRIENDS([]),console.log(this.isLogin),console.log(this.userInfo),alert("로그아웃!!"),this.$router.push("/")},goMyPage(){this.num=this.userInfo.id,this.$router.push("/myPage")}},created(){console.log("navbar 언제 생성되는지 확인")}};const wt=(0,r.Z)(ft,[["render",gt]]);var bt=wt;const vt="lobbyStore",Ct="roomdataStore",_t="mypageStore",St="memberStore";var It={name:"LobbyView",components:{MakeRoom:st,NavHeader:bt},data(){return{num:1,enterRoomData:{},enterModalVisible:!1,searchRoomKeyword:"",friends:[],members:[],roomNo:-1,password:"",showNav:!0}},watch:{userInfo(){console.log("userInfo 보고있다 ");try{this.getFriendsStore(this.userInfo.id)}catch(e){this.$router.push("/")}},friendList(){this.friends=this.friendList},memberList(){this.members=this.memberList}},computed:{...(0,k.rn)(_t,["friendList"]),...(0,k.rn)(St,["userInfo"]),...(0,k.Se)(vt,["roomList","memberList"]),...(0,k.Se)(Ct,["roomTitle","isCaptain","isConnected"])},methods:{...(0,k.nv)(vt,["getRoomList","getMemberList"]),...(0,k.nv)(_t,["getFriendsStore"]),...(0,k.nv)(Ct,["enterRoom","saveRoomTitle","saveIsCaptain"]),scrollEvent(){scrollY<=10?(this.showNav=!0,console.log("지금 보여야됨")):this.showNav=!1},goMypageTest(){this.$router.push("/myPage")},voteResult(){this.$router.push("/voteResult")},testvote(){this.$router.push("/testvote")},openEnterRoom(e){console.log("방 들어갈때 방 정보임"),console.log(e.roomTitle),this.saveRoomTitle(e.roomTitle),console.log(this.roomTitle);const t={roomNo:e.no,id:{id:this.userInfo.id}};this.getMemberList(t),this.enterRoomData=e,this.enterModalVisible=!0},searchRoom(){console.log(this.searchRoomKeyword);const e=document.querySelectorAll("#rooms");e.forEach((e=>{const t=e.querySelector("#title");t.innerText.includes(this.searchRoomKeyword)?e.style.display="block":e.style.display="none"}))},tryEnterRoom(e){console.log("방정보임"),console.log(e),console.log("=======입장하기======="),console.log("=======입장하기======="),e.info={id:this.userInfo.id,no:e.no,password:this.password},this.enterRoom(e)}},created(){if(this.saveIsCaptain(!1),this.getRoomList(),null!==this.userInfo)try{console.log("이거다"),this.getFriendsStore(this.userInfo.id),console.log("아닌가")}catch(e){console.log("실행됨?"),this.$router.push("/")}console.log(this.userInfo)},mounted(){document.addEventListener("scroll",this.scrollEvent),console.log(this.userInfo),console.log("연결되있나??"),console.log(this.isConnected)},unmounted(){document.removeEventListener("scroll",this.scrollEvent)}};const kt=(0,r.Z)(It,[["render",Ue]]);var Tt=kt;const Rt={class:"w3-black wait-background"},Dt=(0,i._)("div",{class:"waitViewChar"},null,-1),Nt={class:"waitRoomName",style:{padding:"15px"}},xt={class:"waitMainSource"},Et={class:"waitRoomBtns"},Vt={class:"d-flex mt-3"},Ot={key:0},Pt={key:1,class:"w3-button w3-white w3-hide-small mx-2 waitRoomBorder",style:{height:"50px","font-size":"20px"},disabled:""},Mt={key:1},Lt={href:"/lobby"},Ut=(0,i._)("i",{class:"fa fa-close"},null,-1),jt=(0,i.Uk)("방삭제 "),zt=[Ut,jt],Ft=(0,i._)("i",{class:"fa fa-close"},null,-1),$t=(0,i.Uk)("방나가기 "),Gt=[Ft,$t],Wt={class:"userListInfo"},At={id:"userDetail"},Jt={class:"readySetStamp"},qt={class:"imgWrap"},Bt=["src"],Zt={class:"w3-row"},Ht={class:"chatList",id:"chatList"},Yt={class:"chatItem"};function Kt(e,t,s,n,a,r){return(0,i.wg)(),(0,i.iD)("div",Rt,[Dt,(0,i._)("h1",Nt,[(0,i._)("b",null,(0,$.zw)(e.roomTitle),1)]),(0,i._)("div",xt,[(0,i._)("div",Et,[(0,i._)("div",Vt,[e.isCaptain?((0,i.wg)(),(0,i.iD)("span",Ot,[a.ifStart?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"w3-button w3-white w3-hide-small mx-2 waitRoomBorder",style:{height:"50px","font-size":"20px"},onClick:t[0]||(t[0]=(...e)=>r.startSignal&&r.startSignal(...e))}," 게임시작 ")):((0,i.wg)(),(0,i.iD)("button",Pt," 게임시작 "))])):(0,i.kq)("",!0),e.isCaptain?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",Mt,[a.ifReady?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:0,class:"w3-button w3-white w3-hide-small mx-2 waitRoomBorder",style:{height:"50px","font-size":"20px"},onClick:t[1]||(t[1]=(...e)=>r.sendReady&&r.sendReady(...e))}," 준비 ")),a.ifReady?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"w3-button w3-white w3-hide-small mx-2 waitRoomBorder",style:{height:"50px","font-size":"20px"},onClick:t[2]||(t[2]=(...e)=>r.sendReady&&r.sendReady(...e))}," 준비취소 ")):(0,i.kq)("",!0)])),(0,i._)("a",Lt,[e.isCaptain?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"w3-button w3-white w3-hide-small mx-2 waitRoomBorder",style:{height:"50px","font-size":"20px"},onClick:t[3]||(t[3]=(...e)=>r.sendBreak&&r.sendBreak(...e))},zt)):(0,i.kq)("",!0),e.isCaptain?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:1,class:"w3-button w3-white w3-hide-small mx-2 waitRoomBorder",style:{height:"50px","font-size":"20px"},onClick:t[4]||(t[4]=(...e)=>r.sendOut&&r.sendOut(...e))},Gt))])])]),(0,i._)("div",Wt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.waitUsers,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{class:"userItemInfo d-flex",key:t},[(0,i._)("div",At,[(0,i.wy)((0,i._)("div",Jt,null,512),[[o.F8,e.ifReady]]),(0,i._)("p",null,"닉네임: "+(0,$.zw)(e.nickName),1),(0,i._)("p",null,"승률: "+(0,$.zw)(e.winRate)+"%",1)]),(0,i._)("div",qt,[(0,i._)("img",{class:"userItemInfoImg",src:"/../../homedesign/images/"+e.imagePath,alt:""},null,8,Bt)])])))),128))]),(0,i._)("div",Zt,[(0,i._)("div",Ht,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.recvList,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i._)("h3",null,(0,$.zw)(e.nickName)+" : "+(0,$.zw)(e.content),1)])))),128))]),(0,i._)("div",Yt,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>a.message=e),type:"text",onKeyup:t[6]||(t[6]=(0,o.D2)(((...e)=>r.sendChat&&r.sendChat(...e)),["enter"])),class:"chatInput"},null,544),[[o.nr,a.message]]),(0,i._)("button",{onClick:t[7]||(t[7]=(...e)=>r.sendChat&&r.sendChat(...e)),class:"sendChatBtn learn-more"}," 보내기 ")])])])])}var Qt=s(5016),Xt=s.n(Qt),es=s(8e3),ts=s.n(es);const ss="roomdataStore",os="memberStore";var is={components:{},data(){return{num:1,user:{},usersInfo:[],nickName:"",message:"",recvList:[],startGame:!1,ifStart:!1,ifReady:!1,sessionId:"",waitUsers:[]}},computed:{...(0,k.rn)(os,["userInfo"]),...(0,k.Se)(ss,["roomNo","roomTitle","isCaptain","isConnected"]),...(0,k.Se)(os,["isLogin"])},created(){this.user=this.userInfo,this.nickName=this.user.nickname,this.connect()},watch:{usersInfo(){this.waitUsers=this.usersInfo}},methods:{...(0,k.nv)(ss,["deleteRoom","enterRoom","saveRoomTitle","saveIsCaptain","saveIsConnected"]),connect(){const e="https://i7e107.p.ssafy.io/roomSocket";let t=new(ts())(e);this.stompClient=Xt().over(t),t.onclose=function(){this.saveIsConnected(!1)},this.stompClient.connect({},(e=>{this.connected=!0,console.log(this.isConnected),console.log("소켓 연결 성공",e),this.sessionId=t._transport.url.slice(-18,-10),this.sendProfile(),this.stompClient.subscribe(`/topic/sendChat/${this.roomNo}`,(e=>{this.recvList.push(JSON.parse(e.body)),this.$nextTick((()=>{let e=document.querySelector("#chatList");e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}))})),this.stompClient.subscribe(`/topic/sendProfile/${this.roomNo}`,(e=>{const t=JSON.parse(e.body);this.usersInfo=t.userList,"out"===e.body.progress&&(this.stompClient.disconnect(),this.$router.push({name:"lobby "}))})),this.stompClient.subscribe(`/topic/sendReady/${this.roomNo}`,(e=>{const t=JSON.parse(e.body);this.ifStart=t.ifStart,this.usersInfo.forEach((e=>{e.id===t.id&&(e.ifReady=t.ifReady)})),!0===t.startGame&&this.$router.push({name:"ingame",params:{id_pk:this.roomNo}})})),this.stompClient.subscribe(`/topic/sendBreak/${this.roomNo}`,(()=>{this.stompClient.disconnect(),this.$router.push({name:"lobby"})}))}),(()=>{this.connected=!1}))},sendChat(){if(this.stompClient&&this.stompClient.connected){const e={roomNo:this.roomNo,nickName:this.nickName,content:this.message};this.stompClient.send("/receiveChat",JSON.stringify(e),{}),this.message=""}},sendProfile(){if(this.stompClient&&this.stompClient.connected){const e={sessionId:this.sessionId,roomNo:this.roomNo,id:this.user.id};this.stompClient.send("/receiveProfile",JSON.stringify(e),{})}},sendReady(){if(this.stompClient&&this.stompClient.connected){this.ifReady=!this.ifReady;const e={roomNo:this.roomNo,startGame:this.startGame,ifReady:this.ifReady,id:this.user.id};this.stompClient.send("/receiveReady",JSON.stringify(e),{})}},sendOut(){this.stompClient&&this.stompClient.connected&&this.stompClient.disconnect()},sendBreak(){if(this.stompClient&&this.stompClient.connected){const e={roomNo:this.roomNo};this.stompClient.send("/receiveBreak",JSON.stringify(e),{})}},sendMessage(e){13===e.keyCode&&""!==this.nickName&&""!==this.message&&(this.sendChat(),this.message="")},isReady(){const e=document.getElementById("readyButton");this.ifReady?e.innerText="준비완료":e.innerText="준비",this.ifReady=!this.ifReady,this.sendReady()},startTest(){this.$router.push({name:"ingame",params:{id_pk:this.roomNo}});const e=document.querySelectorAll(".votePaperMembers");e.forEach((e=>{while(e.hasChildNodes())e.removeChild(e.firstChild)}))},startSignal(){this.startGame=!0,this.sendReady()}},mounted(){},unmounted(){this.stompClient.disconnect()}};const ns=(0,r.Z)(is,[["render",Kt]]);var as=ns;const rs={key:0},ls=(0,i.uE)('<div class="mafiaImage"></div><div style="width:65%;margin-left:120px;margin-top:270px;"><h3 class="">당신의 직업: 마피아</h3><h3 class="">밤마다 한명의 플레이어를 죽일 수 있습니다.</h3><h3 class="">모든 플레이어를 죽이면 승리!</h3></div>',2),cs=[ls],ds={key:1},ms=(0,i.uE)('<div class="doctorImage"></div><div style="width:65%;margin-left:120px;margin-top:250px;"><h3 class="">당신의 직업: 의사</h3><h3 class=""> 밤마다 한명의 플레이어를 마피아로 부터 보호할 수 있습니다. </h3><h3 class="">마피아를 잡아내면 승리!</h3></div>',2),hs=[ms],us={key:2},gs=(0,i.uE)('<div class="headmasterImage"></div><div style="width:65%;margin-left:120px;margin-top:270px;"><h3 class="">당신의 직업: 교주</h3><h3 class="">특정 동작을 수행할 때 마다 신도 카운트가 증가합니다.</h3><h3 class="">다른 플레이어 수 만큼 신도 카운트를 쌓으면 승리!</h3></div>',2),ps=[gs],ys={key:3},fs=(0,i.uE)('<div class="citizenImage"></div><div style="width:65%;margin-left:120px;margin-top:250px;"><h3 class="">당신의 직업: 시민</h3><h3 class=""> 당신은 선량한 시민입니다. 다른 사람들과 협력해 마피아를 잡아내세요. </h3><h3 class="">마피아를 잡아내면 승리!</h3></div>',2),ws=[fs],bs={key:1,class:"dayVoteSkip"},vs=(0,i._)("h2",null,"스킵 투표!!",-1),Cs=[vs],_s={key:2,class:"GovoteForm"},Ss=(0,i._)("h3",{class:"dayVoteTitle"},"지금 낮 투표임",-1),Is={class:"voteItem"},ks=["id"],Ts=["onClick"],Rs={class:"brownColor learn-more",style:{height:"30px",margin:"10px 0px",cursor:"pointer","vertical-align":"middle","font-family":"'NeoDunggeunmo Code'"}},Ds={style:{position:"relative"}},Ns={style:{"text-align":"center","font-size":"22px"},class:"mt-5"},xs=(0,i.Uk)(" 선택한 유저: "),Es={style:{"font-weight":"bold","text-align":"center",padding:"0px"}},Vs={key:0,style:{"text-align":"center",color:"black"}},Os={key:1,style:{"text-align":"center",color:"white"}},Ps={key:3,class:"GovoteForm"},Ms=(0,i._)("h3",{class:"dayVoteTitle"},"밤 투표 진행중",-1),Ls={class:"voteItem"},Us=["id"],js=["onClick"],zs={class:"brownColor learn-more",style:{height:"30px",margin:"10px 0px",cursor:"pointer","vertical-align":"middle","font-family":"'NeoDunggeunmo Code'"}},Fs={style:{position:"relative"}},$s={style:{"text-align":"center","font-size":"22px"},class:"mt-5"},Gs=(0,i.Uk)(" 선택한 유저: "),Ws={style:{"font-weight":"bold","text-align":"center",padding:"0px"}},As={key:4,class:"GovoteForm"},Js=(0,i._)("h3",{class:"dayVoteTitle"},"밤 투표 진행중",-1),qs={class:"voteItem"},Bs=["id"],Zs=["onClick"],Hs={class:"brownColor learn-more",style:{height:"30px",margin:"10px 0px",cursor:"pointer","vertical-align":"middle","font-family":"'NeoDunggeunmo Code'"}},Ys={style:{position:"relative"}},Ks={style:{"text-align":"center","font-size":"22px"},class:"mt-5"},Qs=(0,i.Uk)(" 선택한 유저: "),Xs={style:{"font-weight":"bold","text-align":"center",padding:"0px"}},eo={class:"w3-main mx-5"},to={class:"w3-row"},so={class:"w3-col m8"},oo={class:"w3-row"},io={class:"mx-2 my-2 w3-container w3-col m5",id:"video-container"},no={class:"mx-2 my-2 w3-container w3-col m5",id:"video-container"},ao={class:"mx-2 my-2 w3-container w3-col m5",id:"video-container"},ro={class:"mx-2 my-2 w3-container w3-col m5",id:"video-container"},lo={class:"w3-col m4"},co={class:"mx-2 py-2 w3-container w3-col m9 just myVideoBackground"},mo={class:"brownColor",style:{"text-align":"center"}},ho={class:"mx-2 my-2 w3-container w3-col m9 just",style:{padding:"0%","justify-content":"center"},id:"video-container"};function uo(e,t,s,o,n,a){const r=(0,i.up)("ingame-nav"),l=(0,i.up)("other-user-video"),c=(0,i.up)("I"),d=(0,i.up)("user-video"),m=(0,i.up)("mission-user-video");return(0,i.wg)(),(0,i.iD)(i.HY,null,[n.showblackGround?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,$.C_)({blackGround:n.isDark,blackGroundOut:!n.isDark})},null,2)):(0,i.kq)("",!0),(0,i._)("div",{class:(0,$.C_)({ingameNight:n.progress.isNight,ingameDay:n.progress.isDay,ingameDayVote:n.progress.isVoteDay,ingameDayVoteResult:n.progress.isVoteDayResult,ingameNightResult:n.progress.isNightResult})},[(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>a.openJobRoll&&a.openJobRoll(...e)),class:(0,$.C_)({jobRollFormSide:!n.isjobRollCenter,jobRollFormCenter:n.isjobRollCenter})},null,2),n.isJobRollOpen?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:t[1]||(t[1]=(...e)=>a.switchJobRoll&&a.switchJobRoll(...e)),class:"openedJobRoll"},["mafia"===n.myInfo.job?((0,i.wg)(),(0,i.iD)("div",rs,cs)):(0,i.kq)("",!0),"doctor"===n.myInfo.job?((0,i.wg)(),(0,i.iD)("div",ds,hs)):(0,i.kq)("",!0),"police"===n.myInfo.job?((0,i.wg)(),(0,i.iD)("div",us,ps)):(0,i.kq)("",!0),"citizen"===n.myInfo.job?((0,i.wg)(),(0,i.iD)("div",ys,ws)):(0,i.kq)("",!0)])):(0,i.kq)("",!0),n.showModal?((0,i.wg)(),(0,i.iD)("div",bs,Cs)):(0,i.kq)("",!0),n.progress.isVoteDay&&!0===n.myInfo.isAlive?((0,i.wg)(),(0,i.iD)("div",_s,[Ss,(0,i._)("div",Is,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.gameInfos,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"voteUserList",key:e.id},[(0,i._)("div",{id:e.id,class:"d-flex"},[e.isAlive?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"",style:{"font-size":"40px"},onClick:t=>a.chooseVote(e)},[(0,i._)("p",Rs,(0,$.zw)(e.nickname),1)],8,Ts)):(0,i.kq)("",!0)],8,ks)])))),128)),n.dayVoteSkiped?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:0,class:"voteInvalidBtn",onClick:t[2]||(t[2]=(...e)=>a.invalidVote&&a.invalidVote(...e))}," 투표 스킵 "))]),(0,i._)("div",Ds,[(0,i._)("p",Ns,[xs,(0,i._)("span",Es,(0,$.zw)(n.selected.nickname),1)]),n.selected&&!n.isVoted?((0,i.wg)(),(0,i.iD)("p",{key:0,class:"sendVoteBtn",style:{display:"inline"},onClick:t[3]||(t[3]=e=>a.sendVote(n.selected.id))}," 투표 확정 ")):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),(0,i._)("div",{class:(0,$.C_)({voteResultDay:n.progress.isVoteDayResult,voteResultNight:n.progress.isNightResult})},[n.progress.isVoteDayResult?((0,i.wg)(),(0,i.iD)("h1",Vs,(0,$.zw)(n.showingMsg),1)):(0,i.kq)("",!0),n.progress.isNightResult?((0,i.wg)(),(0,i.iD)("h1",Os,(0,$.zw)(n.showingMsg),1)):(0,i.kq)("",!0),(0,i._)("div",{onClick:t[4]||(t[4]=(...e)=>a.getOut&&a.getOut(...e)),class:(0,$.C_)({redChar:"red"===n.deadColor,redCharGone:"red"===n.deadColor&&n.isGone,blueChar:"blue"===n.deadColor,blueCharGone:"blue"===n.deadColor&&n.isGone,whiteChar:"white"===n.deadColor,whiteCharGone:"white"===n.deadColor&&n.isGone,blackChar:"black"===n.deadColor,blackCharGone:"black"===n.deadColor&&n.isGone,yellowChar:"yellow"===n.deadColor,yellowCharGone:"yellow"===n.deadColor&&n.isGone})},null,2),n.deadColor?((0,i.wg)(),(0,i.iD)("div",{key:2,class:(0,$.C_)({deadShadow:!0,deadShadowGone:n.isGone})},null,2)):(0,i.kq)("",!0)],2),n.progress.isNight&&"mafia"===n.myInfo.job&&!0===n.myInfo.isAlive?((0,i.wg)(),(0,i.iD)("div",Ps,[Ms,(0,i._)("div",Ls,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.gameInfos,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"voteUserList",key:e.id},[(0,i._)("div",{id:e.id,class:"d-flex"},[e.isAlive?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"",style:{"font-size":"50px"},onClick:t=>a.chooseVote(e)},[(0,i._)("p",zs,(0,$.zw)(e.nickname),1)],8,js)):(0,i.kq)("",!0)],8,Us)])))),128))]),(0,i._)("div",Fs,[(0,i._)("p",$s,[Gs,(0,i._)("span",Ws,(0,$.zw)(n.selected.nickname),1)]),n.selected&&!n.isVoted?((0,i.wg)(),(0,i.iD)("p",{key:0,class:"sendVoteBtn",style:{display:"inline"},onClick:t[5]||(t[5]=e=>a.sendVote(n.selected.id))}," 투표 확정 ")):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),n.progress.isNight&&"doctor"===n.myInfo.job&&!0===n.myInfo.isAlive?((0,i.wg)(),(0,i.iD)("div",As,[Js,(0,i._)("div",qs,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.gameInfos,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"voteUserList",key:e.id},[(0,i._)("div",{id:e.id,class:"d-flex"},[e.isAlive?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"",style:{"font-size":"50px"},onClick:t=>a.chooseVote(e)},[(0,i._)("p",Hs,(0,$.zw)(e.nickname),1)],8,Zs)):(0,i.kq)("",!0)],8,Bs)])))),128))]),(0,i._)("div",Ys,[(0,i._)("p",Ks,[Qs,(0,i._)("span",Xs,(0,$.zw)(n.selected.nickname),1)]),n.selected&&!n.isVoted?((0,i.wg)(),(0,i.iD)("p",{key:0,class:"sendVoteBtn",style:{display:"inline"},onClick:t[6]||(t[6]=e=>a.sendVote(n.selected.id))}," 투표 확정 ")):(0,i.kq)("",!0)])])):(0,i.kq)("",!0),(0,i._)("div",eo,[(0,i.Wm)(r,{class:"mb-3",count:n.count,progress:n.progress,myInfo:n.myInfo},null,8,["count","progress","myInfo"]),(0,i._)("div",to,[(0,i._)("div",so,[(0,i._)("div",oo,[(0,i._)("div",io,[(0,i.Wm)(l,{class:"OtherVideoBackground","stream-manager":n.subscribers[0],gameInfo:n.gameInfos[0]},null,8,["stream-manager","gameInfo"])]),(0,i._)("div",no,[(0,i.Wm)(l,{class:"OtherVideoBackground","stream-manager":n.subscribers[1],gameInfo:n.gameInfos[1]},null,8,["stream-manager","gameInfo"])]),(0,i._)("div",ao,[(0,i.Wm)(l,{class:"OtherVideoBackground","stream-manager":n.subscribers[2],gameInfo:n.gameInfos[2]},null,8,["stream-manager","gameInfo"])]),(0,i._)("div",ro,[(0,i.Wm)(l,{class:"OtherVideoBackground","stream-manager":n.subscribers[3],gameInfo:n.gameInfos[3]},null,8,["stream-manager","gameInfo"])])])]),(0,i._)("div",lo,[(0,i._)("div",co,[(0,i._)("h3",mo,[(0,i._)("b",null,[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Uk)("직업: "+(0,$.zw)(n.koreanJob),1)])),_:1})])])]),(0,i._)("div",ho,["police"!==n.myInfo.job?((0,i.wg)(),(0,i.j4)(d,{key:0,"stream-manager":n.publisher,gameInfo:n.myInfo,class:"myVideoBackground",style:{"text-align":"center"}},null,8,["stream-manager","gameInfo"])):(0,i.kq)("",!0),"police"===n.myInfo.job?((0,i.wg)(),(0,i.j4)(m,{key:1,"stream-manager":n.publisher,gameInfo:n.myInfo,class:"myVideoBackground"},null,8,["stream-manager","gameInfo"])):(0,i.kq)("",!0),!n.isSkiped&&n.progress.isDay?((0,i.wg)(),(0,i.iD)("div",{key:2,class:"ingameDaySkipBtn",onClick:t[7]||(t[7]=(...e)=>a.sendSkip&&a.sendSkip(...e))}," 긴급 투표 요청! ")):(0,i.kq)("",!0)])])])])],2)],64)}const go={class:"w3-row"},po={class:"w3-col m2",id:"info-time"},yo={id:"day"},fo={class:"w3-col m7 border border-secondary px-3",id:"info"},wo=(0,i._)("div",{class:"w3-col m1"},null,-1);function bo(e,t,s,n,a,r){const l=(0,i.up)("ingame-timer");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("header",go,[(0,i._)("div",po,[(0,i.Wm)(l,{id:"timer",time:s.count},null,8,["time"]),(0,i._)("p",yo,"day: "+(0,$.zw)(s.progress.nowDay),1)]),(0,i._)("div",fo,[(0,i.wy)((0,i._)("p",null," 곧 게임이 시작됩니다. ",512),[[o.F8,0===s.progress.nowDay&&""===s.myInfo.job]]),(0,i.wy)((0,i._)("p",null," 두루마리를 열어 직업을 확인하세요. ",512),[[o.F8,0===s.progress.nowDay&&""!==s.myInfo.job]]),(0,i.wy)((0,i._)("p",null," 아침이 밝았습니다. ",512),[[o.F8,0!==s.progress.nowDay&&s.progress.isDay]]),(0,i.wy)((0,i._)("p",null,"당신의 마피아에게 투표하세요.",512),[[o.F8,s.progress.isVoteDay]]),(0,i.wy)((0,i._)("p",null,(0,$.zw)(s.progress.nowDay)+" 번째 날의 투표 결과입니다. ",513),[[o.F8,s.progress.isVoteDayResult]]),(0,i.wy)((0,i._)("p",null,"밤이 되었습니다.",512),[[o.F8,s.progress.isNight]]),(0,i.wy)((0,i._)("p",null,(0,$.zw)(s.progress.nowDay)+" 번째 날 새벽입니다. ",513),[[o.F8,s.progress.isNightResult]])]),wo])])}const vo=(0,i._)("strong",null,":",-1);function Co(e,t,s,o,n,a){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("p",{class:(0,$.C_)({"text-danger":e.total<=3})},[(0,i._)("strong",null,(0,$.zw)(e.minutes),1),vo,(0,i._)("strong",null,(0,$.zw)(e.seconds),1)],2)])}var _o={props:{time:{type:Number,default:0}},data:function(){return{total:"",minutes:"--",seconds:"--",interval:0}},watch:{time(){this.total=parseInt(this.time,10),clearInterval(this.interval),this.interval=setInterval((()=>{this.tick()}),1e3)}},methods:{str_pad_left:function(e,t,s){return(new Array(s+1).join(t)+e).slice(-s)},tick:function(){var e=Math.floor(this.total/60),t=this.total-60*e;this.minutes=this.str_pad_left(e,"0",2),this.seconds=this.str_pad_left(t,"0",2),this.total<=1&&clearInterval(this.interval),this.total-=1}}};const So=(0,r.Z)(_o,[["render",Co]]);var Io=So,ko={data(){return{ingameNow:"아침"}},props:{count:Object,progress:Object,myInfo:Object},components:{IngameTimer:Io}};const To=(0,r.Z)(ko,[["render",bo]]);var Ro=To,Do=s(9669),No=s.n(Do),xo=s(4905);const Eo={key:0,class:"brownColor charSetClass"},Vo=(0,i._)("br",null,null,-1);function Oo(e,t,s,o,n,a){const r=(0,i.up)("ov-video");return s.streamManager?((0,i.wg)(),(0,i.iD)("div",Eo,[(0,i._)("div",{class:(0,$.C_)({userCharBlack:"black"===s.gameInfo.color,userCharWhite:"white"===s.gameInfo.color,userCharRed:"red"===s.gameInfo.color,userCharBlue:"blue"===s.gameInfo.color,userCharYellow:"yellow"===s.gameInfo.color})},null,2),Vo,(0,i._)("h3",null,[(0,i._)("b",null,(0,$.zw)(s.gameInfo.nickname),1)]),(0,i.Wm)(r,{"stream-manager":s.streamManager,style:{"border-radius":"10px"}},null,8,["stream-manager"])])):(0,i.kq)("",!0)}const Po={autoplay:"",class:"video-size"};function Mo(e,t,s,o,n,a){return(0,i.wg)(),(0,i.iD)("video",Po)}var Lo={name:"OvVideo",props:{streamManager:Object},mounted(){this.streamManager.addVideoElement(this.$el)}};const Uo=(0,r.Z)(Lo,[["render",Mo]]);var jo=Uo,zo={name:"UserVideo",data(){return{votedInfos:[]}},components:{OvVideo:jo},props:{streamManager:Object,gameInfo:Object},watch:{gameInfo(){this.votedInfos=this.gameInfo.voted}},computed:{clientData(){const{clientData:e}=this.getConnectionData();return e}},methods:{getConnectionData(){const{connection:e}=this.streamManager.stream;return JSON.parse(e.data)}}};const Fo=(0,r.Z)(zo,[["render",Oo]]);var $o=Fo;const Go={key:0,class:"brownColor"},Wo={key:0,class:"checkAlive"},Ao={key:1,class:"checkDead"},Jo={style:{"padding-top":"18px","margin-top":"20px"}};function qo(e,t,s,o,n,a){const r=(0,i.up)("ov-video");return s.streamManager?((0,i.wg)(),(0,i.iD)("div",Go,[(0,i._)("div",{class:(0,$.C_)({userCharBlack:"black"===s.gameInfo.color,userCharWhite:"white"===s.gameInfo.color,userCharRed:"red"===s.gameInfo.color,userCharBlue:"blue"===s.gameInfo.color,userCharYellow:"yellow"===s.gameInfo.color})},null,2),!0===s.gameInfo.isAlive?((0,i.wg)(),(0,i.iD)("div",Wo)):(0,i.kq)("",!0),!1===s.gameInfo.isAlive?((0,i.wg)(),(0,i.iD)("div",Ao)):(0,i.kq)("",!0),(0,i._)("h3",Jo,[(0,i._)("b",null,(0,$.zw)(s.gameInfo.nickname),1)]),(0,i.Wm)(r,{"stream-manager":s.streamManager,style:{"border-radius":"10px"}},null,8,["stream-manager"])])):(0,i.kq)("",!0)}var Bo={name:"UserVideo",data(){return{votedInfos:[]}},components:{OvVideo:jo},props:{streamManager:Object,gameInfo:Object},watch:{gameInfo(){this.votedInfos=this.gameInfo.voted}},computed:{clientData(){const{clientData:e}=this.getConnectionData();return e}},methods:{getConnectionData(){const{connection:e}=this.streamManager.stream;return JSON.parse(e.data)}}};const Zo=(0,r.Z)(Bo,[["render",qo]]);var Ho=Zo;const Yo={key:0,class:"charSetClass"};function Ko(e,t,s,o,n,a){const r=(0,i.up)("mission-video");return s.streamManager&&!0===s.gameInfo.isAlive?((0,i.wg)(),(0,i.iD)("div",Yo,[(0,i._)("div",{class:(0,$.C_)({userCharBlack:"black"===s.gameInfo.color,userCharWhite:"white"===s.gameInfo.color,userCharRed:"red"===s.gameInfo.color,userCharBlue:"blue"===s.gameInfo.color,userCharYellow:"yellow"===s.gameInfo.color})},null,2),(0,i.Wm)(r,{"stream-manager":s.streamManager,style:{"border-radius":"10px"}},null,8,["stream-manager"])])):(0,i.kq)("",!0)}const Qo={key:0,class:"clearSign"},Xo={class:"content brownColor",style:{"font-size":"20px","text-align":"center","padding-top":"40px","padding-bottom":"20px","font-family":"'NeoDunggeunmo Code'"}},ei=(0,i.uE)('<div style="text-align:center;border-radius:10px;"><canvas id="canvas" style="border-radius:10px;"></canvas></div><div id="label-container" class="brownColor"></div><div id="missionCnt" class="d-flex missionInfo brownColor" style="margin-left:50px;padding-bottom:30px;">신도카운트: </div><div id="clearMessage" class="brownColor" style="font-size:20px;font-family:&#39;NeoDunggeunmo Code&#39;;"></div>',4);function ti(e,t,s,o,n,a){return(0,i.wg)(),(0,i.iD)(i.HY,null,[e.ifWin?((0,i.wg)(),(0,i.iD)("div",Qo)):(0,i.kq)("",!0),(0,i._)("div",Xo,[(0,i._)("b",null,(0,$.zw)(n.motionExplanation[e.missionClass]),1)]),ei],64)}var si=s(9357);const oi="ingameStore";var ii={name:"OvVideo",data(){return{URL:"https://teachablemachine.withgoogle.com/models/yk2e7UetV/",modelURL:"https://teachablemachine.withgoogle.com/models/yk2e7UetV/model.json",metadataURL:"https://teachablemachine.withgoogle.com/models/yk2e7UetV/metadata.json",model:"",maxPredictions:"",labelContainer:"",webcam:"",ctx:"",start:0,tryingMission:!1,end:"",motionExplanation:["고개를 오른쪽으로 기울이세요!","고개를 왼쪽으로 기울이세요!","왼손으로 머리를 긁으세요!"]}},computed:{...(0,k.Se)(oi,["ifWin","isDay","missionCnt","missionClass"])},props:{streamManager:Object},methods:{...(0,k.nv)(oi,["setIfWin","setMissionCnt"]),async startMotion(){this.model=Object.freeze(await si.zD(this.modelURL,this.metadataURL)),this.maxPredictions=this.model.getTotalClasses();const e=200,t=!0;this.webcam=new si.bb(e,e,t),await this.webcam.setup(),await this.webcam.play(),window.requestAnimationFrame(this.loop);const s=document.getElementById("canvas");s.width=e,s.height=e,this.ctx=s.getContext("2d"),this.labelContainer=document.getElementById("label-container");for(let o=0;o<3;o++){const e=document.createElement("div");e.classList.add("missionInfo"),this.labelContainer.appendChild(e)}},async loop(){this.webcam.update(),await this.predict(),window.requestAnimationFrame(this.loop)},async predict(){const{pose:e,posenetOutput:t}=await this.model.estimatePose(this.webcam.canvas),s=await this.model.predict(t);var o=new Date;if(!this.ifWin&&this.isDay){const e=String(parseInt(100*s[this.missionClass].probability.toFixed(2)))+" % 일치";if(this.labelContainer.childNodes[0].innerText=e,o-this.end>=6e3){if("1.00"===s[this.missionClass].probability.toFixed(2)){if(0===this.start)this.start=new Date;else if(o-this.start>=3e3&&this.missionCnt<4){var i=document.querySelector("#missionCnt"),n=document.createElement("div");if(n.classList.add("believer"),i.appendChild(n),this.start=0,this.end=new Date,this.setMissionCnt(this.missionCnt+1),console.log(this.missionCnt),4===this.missionCnt){var a=document.querySelector("#clearMessage"),r=document.createElement("div");r.classList.add("missionClearInfo"),r.innerText="낮 투표에서 살아남으면 승리!",a.appendChild(r),this.setIfWin(!0)}}}else this.start=0;if(0===this.start){const e="3 초 유지시 클리어";this.labelContainer.childNodes[1].innerText=e}else{const e=String(parseInt(4-(o-this.start)/1e3))+" 초 유지시 클리어";this.labelContainer.childNodes[1].innerText=e}}else{this.labelContainer.childNodes[0].innerText="성공!";const e=String(parseInt(7-(o-this.end)/1e3))+" 초 뒤 도전가능";this.labelContainer.childNodes[1].innerText=e}}else if(!this.ifWin&&!this.isDay){const e="낮에만 신도를 ",t="모을 수 있습니다";this.labelContainer.childNodes[0].innerText=e,this.labelContainer.childNodes[1].innerText=t}this.drawPose(e)},drawPose(e){this.webcam.canvas&&this.ctx.drawImage(this.webcam.canvas,0,0)}},created(){this.startMotion()},mounted(){}};const ni=(0,r.Z)(ii,[["render",ti]]);var ai=ni,ri={name:"UserVideo",components:{MissionVideo:ai},props:{streamManager:Object,gameInfo:Object},computed:{clientData(){const{clientData:e}=this.getConnectionData();return e}},methods:{getConnectionData(){const{connection:e}=this.streamManager.stream;return JSON.parse(e.data)}}};const li=(0,r.Z)(ri,[["render",Ko]]);var ci=li;const di="memberStore",mi="ingameStore",hi="roomdataStore";No().defaults.headers.post["Content-Type"]="application/json";const ui="https://i7e107.p.ssafy.io:6443",gi="MY_SECRET";var pi={name:"IngameView",components:{IngameNav:Ro,UserVideo:$o,OtherUserVideo:Ho,MissionUserVideo:ci},data(){return{OV:void 0,session:void 0,publisher:void 0,subscribers:[],mySessionId:this.$route.params.roomnumber,myUserName:"",koreanJob:"",startGame:!1,startGameSignal:!1,gameInfos:[],myInfo:{id:"",nickname:"",isAlive:!0,color:"",job:"",voted:[]},progress:{nowDay:0,isDay:!0,isVoteDay:!1,isVoteDayResult:!1,isNight:!1,isNightResult:!1},missionWin:!1,showblackGround:!1,isDark:!1,endding:[],voteNo:1,selected:"",isVoted:!1,showModal:!1,dayStartTime:null,gameDayTime:null,gameDayVoteTime:null,gameVoteResultTime:null,gameNightTime:null,gameNightResultTime:null,dayTimeCount:0,dayVoteTimeCount:0,dayVoteResultCount:0,dayNightTimeCount:0,dayNightResultCount:0,count:0,isjobRollCenter:!0,isJobRollOpen:!1,job:"citizen",setUserColor:[],jobRollOpenedForSetting:!1,isSkiped:!1,voteUser:"",voteClearNum:0,dayVoteUser:[],dayVotedUser:[],clearId:0,dayVoteSkiped:!1,deadColor:"",isGone:!1,whoIsGone:"",msgCnt:0,showingMsg:"",stopCnt:0,stopCnt2:0,voteClearNum2:0}},computed:{...(0,k.rn)(di,["userInfo"]),...(0,k.Se)(hi,["roomNo","roomTitle","isCaptain","isConnected"]),...(0,k.Se)(di,["isLogin"]),...(0,k.Se)(mi,["job","ifWin"])},beforeCreate(){},created(){this.mySessionId=`${this.roomNo}`,this.setIfWin(!1),this.setMissionCnt(0),this.setMissionClass(this.randomNum(0,2)),this.myInfo.id=this.userInfo.id,this.myInfo.nickname=this.userInfo.nickname,this.myUserName=this.userInfo.nickname,this.myUserId=this.userInfo.id,this.joinSession(),setTimeout((()=>{this.connect()}),12e3)},mounted(){},watch:{startGame(){this.startGameSignal=!0}},methods:{...(0,k.nv)(mi,["setGameResult","setIsDay","setIfWin","setMissionCnt","setMissionClass"]),...(0,k.nv)(hi,["deleteRoom","enterRoom","saveRoomTitle","saveIsCaptain","saveIsConnected"]),connect(){const e="https://i7e107.p.ssafy.io/roomSocket";let t=new(ts())(e);this.stompClient=Xt().over(t),console.log(`소켓 연결을 시도합니다. 서버 주소: ${e}`),this.stompClient.connect({},(e=>{this.connected=!0,console.log("소켓 연결 성공",e),console.log("======================됐나?======================="),this.sessionId=t._transport.url.slice(-18,-10),this.sendStart(),this.stompClient.subscribe(`/topic/sendMafia/${this.mySessionId}/${this.userInfo.id}`,(e=>{console.log("=========================개인별로 받는 정보============================="),console.log(e),console.log("구독으로 받은 게임 정보입니다.",e.body),console.log(`==== gameInfos ${this.gameInfos} ====`);const t=JSON.parse(e.body);console.log("=======================직업 뭐받는지 확인================"),this.myInfo.job=t.job,"citizen"===t.job?this.koreanJob="시민":"mafia"===t.job?this.koreanJob="마피아":"police"===t.job?this.koreanJob="교주":"doctor"===t.job&&(this.koreanJob="의사"),console.log(this.myInfo.job),this.setUserColor=t,console.log("=============얘는 gameinfos에 색 세팅되는 부분================="),console.log("====================gameinfos 확인===================="),t.joinUsers.forEach((e=>{this.gameInfos.forEach((t=>{console.log(e.id),e.id===t.id&&(t.color=e.color,t.job=e.job),e.id===this.myInfo.id&&(this.myInfo.color=e.color)}))})),console.log(`===== absouluteTime ${t.absoluteTime} =====`),this.setStartTime(t.absoluteTime),console.log("=============얘는 gameinfos에 색 세팅되는 부분================="),console.log("====================gameinfos 확인===================="),console.log(this.gameInfos),this.startDay()})),this.stompClient.subscribe(`/topic/sendMafia/${this.mySessionId}`,(e=>{console.log("구독으로 받은 게임 정보입니다.",e.body);const t=JSON.parse(e.body);if("day"===t.progress&&(this.color=t.color,this.gameInfos.forEach((e=>{e.id===t.id&&(this.voteUser=e.nickname)})),this.showModal=!0,setTimeout((()=>{this.showModal=!1,this.voteUser=""}),1e3),!0===t.ifSkip&&(this.setSkipTime(),this.progress.isDay=!1,this.setIsDay(!1),this.progress.isVoteDay=!0,clearTimeout(this.clearId))),"voteDay"===t.progress&&(this.dayVoteUser.push(t.id),this.dayVotedUser.push(t.votedId),console.log("=========votedId========"),console.log(t.votedId),""!==t.votedId)){const e=document.getElementById(`${t.votedId}`);console.log(e);const s=document.createElement("div");this.gameInfos.forEach((o=>{o.id===t.id&&(s.classList.add(`${o.color}Voted`),e.appendChild(s))}))}console.log("res body progress 오냐?"),console.log(t.progress),"voteDayFinish"===t.progress&&(console.log("================투표 응답 확인하자================="),console.log(e),this.myInfo.id===t.id&&(this.myInfo.isAlive=!1),this.gameInfos.forEach((e=>{e.id===t.id&&(this.deadColor=e.color,this.whoIsGone=e.nickname,e.isAlive=!1)})),""!==t.winJob?(this.endding=t.endding,this.gameEnd(t.winJob)):(this.setDayVoteTime(),this.dayVoteResult(),console.log("================================================="),console.log("투표 결과 들어와서 투표 결과 보여주는 부분 진행되냐?"))),"voteNight"===t.progress&&(console.log(`==== 밤 투표 결과 ${t} ====`),console.log(t.id),this.gameInfos.forEach((e=>{e.id===t.id&&(this.deadColor=e.color,this.whoIsGone=e.nickname,e.isAlive=!1,console.log("===whoIsGone==="),console.log(this.whoIsGone))})),t.winJob?(this.endding=t.endding,this.gameEnd(t.winJob)):(this.setNightVoteTime(),this.dayNightResult()))}))}),(e=>{console.log("소켓 연결 실패",e),this.connected=!1}))},chooseVote(e){this.selected=e},randomNum(e,t){var s=Math.floor(Math.random()*(t-e+1))+e;return s},switchJobRoll(){"citizen"===this.setUserColor.job?this.koreanJob="시민":"mafia"===this.setUserColor.job?this.koreanJob="마피아":"police"===this.setUserColor.job?this.koreanJob="교주":"doctor"===this.setUserColor.job&&(this.koreanJob="의사"),this.isjobRollCenter=!1,this.isJobRollOpen=!1,this.gameInfos.forEach((e=>{this.setUserColor.joinUsers.forEach((t=>{e.id===t.id&&(e.color=t.color),this.myInfo.id===t.id&&(this.myInfo.color=t.color)}))})),!1===this.jobRollOpenedForSetting&&(this.gameInfos.push(this.myInfo),this.jobRollOpenedForSetting=!0)},openJobRoll(){this.isjobRollCenter?this.isJobRollOpen=!0:(setTimeout((()=>{this.isJobRollOpen=!0}),700),this.isjobRollCenter||(this.isjobRollCenter=!0))},joinSession(){this.OV=new xo.Dn,this.session=this.OV.initSession(),this.session.on("streamCreated",(({stream:e})=>{const t=this.session.subscribe(e);this.subscribers.push(t);const s=t.stream.connection.data.split('"'),o=s[3].split(",");this.gameInfos.push({subscriber:t,id:o[0],nickname:o[1],isAlive:!0,color:"",job:"",voted:[]})})),this.session.on("streamDestroyed",(({stream:e})=>{const t=this.subscribers.indexOf(e.streamManager,0);t>=0&&this.subscribers.splice(t,1)})),this.session.on("exception",(({exception:e})=>{console.warn(e)})),this.getToken(this.mySessionId).then((e=>{this.session.connect(e,{clientData:`${this.myUserId}, ${this.myUserName}`}).then((()=>{let e=this.OV.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!1,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});this.publisher=e,this.session.publish(this.publisher)})).catch((e=>{console.log("There was an error connecting to the session:",e.code,e.message)}))})),window.addEventListener("beforeunload",this.leaveSession)},leaveSession(){this.session&&this.session.disconnect(),this.session=void 0,this.mainStreamManager=void 0,this.publisher=void 0,this.subscribers=[],this.OV=void 0,window.removeEventListener("beforeunload",this.leaveSession)},getToken(e){return this.createSession(e).then((e=>this.createToken(e)))},createSession(e){return new Promise(((t,s)=>{No().post(`${ui}/openvidu/api/sessions`,JSON.stringify({customSessionId:e}),{auth:{username:"OPENVIDUAPP",password:gi}}).then((e=>e.data)).then((e=>t(e.id))).catch((o=>{409===o.response.status?t(e):(console.warn(`No connection to OpenVidu Server. This may be a certificate error at ${ui}`),window.confirm(`No connection to OpenVidu Server. This may be a certificate error at ${ui}\n\nClick OK to navigate and accept it. If no certificate warning is shown, then check that your OpenVidu Server is up and running at "${ui}"`)&&location.assign(`${ui}/accept-certificate`),s(o.response))}))}))},createToken(e){return new Promise(((t,s)=>{No().post(`${ui}/openvidu/api/sessions/${e}/connection`,{},{auth:{username:"OPENVIDUAPP",password:gi}}).then((e=>e.data)).then((e=>t(e.token))).catch((e=>s(e.response)))}))},typeEffect(){this.whoIsGone?this.showingMsg=`투표 결과 ${this.whoIsGone} 님이 사망하였습니다!`:this.showingMsg="아무도 사망하지 않았습니다"},typeEffect2(){this.whoIsGone?this.showingMsg=`밤 사이에 ${this.whoIsGone} 님이 사망하였습니다,,,`:this.showingMsg="조용한 밤을 보냈습니다"},getOut(){this.isGone=!0},startDay(){console.log("게임 시작함"),setTimeout((()=>{this.dayTime(),this.startGame=!0}),3e3)},dayTime(){this.isSkiped=!1,this.progress.nowDay=this.progress.nowDay+1,this.progress.isNightResult=!1,this.progress.isDay=!0,this.isVoted=!1,this.setIsDay(!0),this.myInfo.isAlive&&this.avOn(),this.getDayTimeCount(),this.count=this.dayTimeCount,this.clearId=setTimeout((()=>{this.dayVoteTime()}),1e3*this.count+200)},dayVoteTime(){this.isSkiped=!1,this.progress.isDay=!1,this.setIsDay(!1),this.progress.isVoteDay=!0,this.getDayVoteTimeCount(),this.count=this.dayVoteTimeCount,this.voteClearNum=setTimeout((()=>{this.myInfo.isAlive&&this.sendVote("")}),1e3*this.count+200)},dayVoteResult(){this.dayVoteSkiped=!1,this.typeEffect(),this.progress.isVoteDay=!1,this.progress.isVoteDayResult=!0,this.getDayVoteResultCount(),this.count=this.dayVoteResultCount,this.isVoted=!1,setTimeout((()=>{this.isGone=!1,this.deadColor="",this.msgCnt=0,this.stopCnt=0,this.showingMsg="",this.whoIsGone="",this.dayNightTime()}),1e3*this.count+200)},dayNightTime(){this.progress.isVoteDayResult=!1,this.progress.isNight=!0,this.avOff(),this.getDayNightTimeCount(),this.count=this.dayNightTimeCount,this.voteClearNum2=setTimeout((()=>{!this.myInfo.isAlive||"mafia"!==this.setUserColor.job&&"doctor"!==this.setUserColor.job||this.sendVote("")}),1e3*this.count+200)},dayNightResult(){this.typeEffect2(),this.progress.isNight=!1,this.progress.isNightResult=!0,this.getDayNightResultCount(),this.count=this.dayNightResultCount,setTimeout((()=>{this.isGone=!1,this.deadColor="",this.msgCnt=0,this.stopCnt2=0,this.showingMsg="",this.whoIsGone="",this.setDayEndTime(),this.dayTime()}),1e3*this.count+200)},sendSkip(){if(this.stompClient&&this.stompClient.connected){const e={progress:"day",roomNo:this.roomNo,id:this.userInfo.id};this.stompClient.send("/receiveMafia",JSON.stringify(e),{}),this.isSkiped=!0}},sendStart(){if(this.stompClient&&this.stompClient.connected){const e={progress:"start",sessionId:this.sessionId,roomNo:this.roomNo,id:this.userInfo.id};this.stompClient.send("/receiveMafia",JSON.stringify(e),{})}},sendVote(e){if(clearTimeout(this.voteClearNum),clearTimeout(this.voteClearNum2),this.stompClient&&this.stompClient.connected){!1===this.myInfo.isAlive&&this.setIfWin(!1);const t={progress:"voteDay",roomNo:this.mySessionId,id:this.myUserId,nickname:this.userInfo.nickname,job:this.myInfo.job,vote:e,ifWin:this.ifWin};this.progress.isNight&&(t.progress="voteNight"),this.stompClient.send("/receiveMafia",JSON.stringify(t),{})}this.selected="",this.isVoted=!0},invalidVote(){this.sendVote(""),this.dayVoteSkiped=!0},doVote(e){1===this.voteNo&&(this.progress.isVoteDay||this.progress.isNight)&&(this.sendVote(e.id),this.voteNo=0)},avOn(){this.publisher.publishAudio(!1),this.publisher.publishVideo(!0)},avOff(){this.publisher.publishAudio(!1),this.publisher.publishVideo(!1)},gameEnd(e){this.showblackGround=!0,setTimeout((()=>{this.isDark=!0}),1e3);const t=[];console.log("this.gameInfos."),this.endding.forEach((s=>{console.log(s),"citizen"===e?"citizen"!==s.job&&"doctor"!==s.job||t.push({winJob:e,nickname:s.nickname,color:s.color}):s.job===e&&t.push({winJob:e,nickname:s.nickname,color:s.color})})),this.setGameResult(t),setTimeout((()=>{this.leaveSession(),this.$router.push({name:"gameend"})}),4e3)},setStartTime(e){const t=e.split(":"),s=parseInt(t[0]),o=parseInt(t[1]),i=parseInt(t[2]),n=new Date,a=n.getFullYear(),r=n.getMonth(),l=n.getDate(),c=new Date(a,r,l,s,o,i);this.dayStartTime=c,console.log(`===== 게임 시작 시간 ${this.dayStartTime} =====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+60),this.gameDayTime=new Date(this.dayStartTime),console.log(`===== gameDayTime ${this.gameDayTime} =====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+30),this.gameDayVoteTime=new Date(this.dayStartTime),console.log(`===== gameDayVoteTime ${this.gameDayVoteTime} =====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+8),this.gameVoteResultTime=new Date(this.dayStartTime),console.log(`===== gameVoteResultTime ${this.gameVoteResultTime} =====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+20),this.gameNightTime=new Date(this.dayStartTime),console.log(`===== gameNightTime ${this.gameNightTime} =====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+8),this.gameNightResultTime=new Date(this.dayStartTime),console.log(`===== gameNightResultTime ${this.gameNightResultTime} =====`)},getDayTimeCount(){let e=new Date;const t=this.gameDayTime.getTime()-e.getTime();this.dayTimeCount=Math.floor(t/1e3),console.log(`===== dayTimeCount ${this.dayTimeCount} =====`)},getDayVoteTimeCount(){let e=new Date;const t=this.gameDayVoteTime.getTime()-e.getTime();this.dayVoteTimeCount=Math.floor(t/1e3),console.log(`===== dayVoteTimeCount ${this.dayVoteTimeCount} =====`)},getDayVoteResultCount(){let e=new Date;const t=this.gameVoteResultTime.getTime()-e.getTime();this.dayVoteResultCount=Math.floor(t/1e3),console.log(`===== dayVoteResultCount ${this.dayVoteResultCount} =====`)},getDayNightTimeCount(){let e=new Date;const t=this.gameNightTime.getTime()-e.getTime();this.dayNightTimeCount=Math.floor(t/1e3),console.log(`===== dayNightTimeCount ${this.dayNightTimeCount} =====`)},getDayNightResultCount(){let e=new Date;const t=this.gameNightResultTime.getTime()-e.getTime();this.dayNightResultCount=Math.floor(t/1e3),console.log(`===== dayNightResultCount ${this.dayNightResultCount} =====`)},setDayEndTime(){let e=new Date;this.dayStartTime=e,this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+60),this.gameDayTime=new Date(this.dayStartTime),console.log(`===== gameDayTime ${this.gameDayTime} =====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+30),this.gameDayVoteTime=new Date(this.dayStartTime),console.log(`===== gameDayVoteTime ${this.gameDayVoteTime} =====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+8),this.gameVoteResultTime=new Date(this.dayStartTime),console.log(`==== gameVoteResultTime ${this.gameVoteResultTime} ====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+20),this.gameNightTime=new Date(this.dayStartTime),console.log(`==== gameNightTime ${this.gameNightTime} ====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+8),this.gameNightResultTime=new Date(this.dayStartTime),console.log(`===== gameNightResultTime ${this.gameNightResultTime} =====`)},setSkipTime(){this.dayStartTime=new Date,this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+30),this.gameDayVoteTime=new Date(this.dayStartTime),console.log(`===== gameDayVoteTime ${this.gameDayVoteTime} =====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+8),this.gameVoteResultTime=new Date(this.dayStartTime),console.log(`==== gameVoteResultTime ${this.gameVoteResultTime} ====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+20),this.gameNightTime=new Date(this.dayStartTime),console.log(`==== gameNightTime ${this.gameNightTime} ====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+8),this.gameNightResultTime=new Date(this.dayStartTime),console.log(`===== gameNightResultTime ${this.gameNightResultTime} =====`)},setDayVoteTime(){this.dayStartTime=new Date,this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+8),this.gameVoteResultTime=new Date(this.dayStartTime),console.log(`==== gameVoteResultTime ${this.gameVoteResultTime} ====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+20),this.gameNightTime=new Date(this.dayStartTime),console.log(`==== gameNightTime ${this.gameNightTime} ====`),this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+8),this.gameNightResultTime=new Date(this.dayStartTime),console.log(`==== gameNightResultTime ${this.gameNightResultTime} ====`)},setNightVoteTime(){this.dayStartTime=new Date,this.dayStartTime.setSeconds(this.dayStartTime.getSeconds()+8),this.gameNightResultTime=new Date(this.dayStartTime),console.log(`==== gameNightResultTime ${this.gameNightResultTime} ====`)}}};const yi=(0,r.Z)(pi,[["render",uo]]);var fi=yi;const wi={},bi=wi;var vi=bi;const Ci={class:"w3-black mypage-background"},_i={class:"container mypage-undernavbar"},Si=(0,i._)("hr",null,null,-1),Ii=(0,i._)("hr",null,null,-1);function ki(e,t,s,o,n,a){const r=(0,i.up)("nav-header"),l=(0,i.up)("my-profile"),c=(0,i.up)("my-friend");return(0,i.wg)(),(0,i.iD)(i.HY,null,[n.showNav?((0,i.wg)(),(0,i.j4)(r,{key:0,class:"fixed-top",style:{"z-index":"1000"}})):(0,i.kq)("",!0),(0,i._)("div",Ci,[(0,i._)("div",_i,[(0,i.Wm)(l),Si,(0,i.Wm)(c),Ii])])],64)}const Ti=(0,i._)("div",{class:"friendTitle"},null,-1),Ri={class:"friendLayout mt-5"},Di=(0,i._)("hr",null,null,-1),Ni=(0,i._)("hr",null,null,-1);function xi(e,t,s,o,n,a){const r=(0,i.up)("friend-list"),l=(0,i.up)("friend-search");return(0,i.wg)(),(0,i.iD)(i.HY,null,[Ti,(0,i._)("div",Ri,[Di,(0,i.Wm)(r),Ni,(0,i.Wm)(l)])],64)}const Ei={class:"friendList"},Vi=(0,i._)("div",null,null,-1);function Oi(e,t,s,o,n,a){const r=(0,i.up)("friend-item");return(0,i.wg)(),(0,i.iD)("div",Ei,[Vi,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.friends,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i.Wm)(r,{friendItem:e},null,8,["friendItem"])])))),128))])}const Pi={class:"friendItem"},Mi=["src"];function Li(e,t,s,o,n,a){return(0,i.wg)(),(0,i.iD)("div",Pi,[(0,i._)("img",{class:"friendPic",src:"/homedesign/images/"+s.friendItem.imagePath,onerror:"this.style.display='none'"},null,8,Mi),(0,i._)("h3",null,(0,$.zw)(s.friendItem.nickname),1),(0,i._)("button",{class:"deleteButton",onClick:t[0]||(t[0]=(...e)=>a.deleteFriend&&a.deleteFriend(...e))},"친구삭제")])}const Ui="mypageStore",ji="memberStore";var zi={name:"FriendItem",props:{friendItem:{type:Object}},components:{},data(){return{}},computed:{...(0,k.rn)(ji,["userInfo"])},methods:{...(0,k.nv)(Ui,["removeFriendStore","getFriendsStore"]),async deleteFriend(){let e={myId:this.userInfo.id,followId:this.friendItem.id};await this.removeFriendStore(e),console.log(e),this.getFriendsStore(this.userInfo.id)}}};const Fi=(0,r.Z)(zi,[["render",Li]]);var $i=Fi;const Gi="mypageStore";var Wi={name:"FriendList",components:{FriendItem:$i},data(){return{items:[1,2,3,4,5,6,8,9,10,11,12,13,14,15],friends:[]}},computed:{...(0,k.rn)(Gi,["friendList"])},methods:{},created(){},mounted(){},watch:{friendList(e){this.friends=this.friendList,console.log(e)}}};const Ai=(0,r.Z)(Wi,[["render",Oi]]);var Ji=Ai;const qi={class:"friendSearch"},Bi={class:"search-box"},Zi={class:"search-txt-div"},Hi=(0,i._)("hr",{class:"mt-1 mb-0"},null,-1),Yi={class:"search-result"},Ki={key:0,class:"searchPlaceholder"},Qi={class:"searchResultItem"},Xi=["src"],en=["onClick"];function tn(e,t,s,n,a,r){return(0,i.wg)(),(0,i.iD)("div",qi,[(0,i._)("div",Bi,[(0,i._)("div",Zi,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.searchWord=e),onKeyup:t[1]||(t[1]=(0,o.D2)(((...e)=>r.friendSearch&&r.friendSearch(...e)),["enter"])),class:"search-txt",type:"text",placeholder:"search . . .",style:{"font-family":"'NeoDunggeunmo Code'"}},null,544),[[o.nr,a.searchWord]])])]),Hi,(0,i._)("div",Yi,[a.isSearched?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("p",Ki,"친구의 닉네임을 입력해주세요 . . .")),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.searchResult,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i._)("div",Qi,[(0,i._)("img",{class:"friendSearchItemPic",src:"/homedesign/images/"+e.imagePath,onerror:"this.style.display='none'"},null,8,Xi),(0,i._)("h3",null,(0,$.zw)(e.nickname),1),(0,i._)("button",{class:"followButton",onClick:t=>r.friendFollow(e.id)}," 친구추가 ",8,en)])])))),128))])])}const sn="mypageStore",on="memberStore";var nn={name:"FriendSearch",components:{},data(){return{isSearched:!1,searchWord:"",searchResult:[]}},computed:{...(0,k.rn)(sn,["isThereSearch","friendSearchList"]),...(0,k.rn)(on,["userInfo"])},methods:{...(0,k.nv)(sn,["searchFriendStore","followFriendStore","getFriendsStore"]),...(0,k.OI)(sn,["SET_FRIENDS_SEARCH"]),async friendSearch(){if(""!=this.searchWord){let e={word:this.searchWord};await this.searchFriendStore(e),this.isSearched=this.isThereSearch,this.searchWord="",this.searchResult=this.friendSearchList,console.log(this.isSearched)}else this.searchResult=[],this.isSearched=!1},async friendFollow(e){let t={myId:this.userInfo.id,followId:e};console.log(t),await this.followFriendStore(t),this.getFriendsStore(this.userInfo.id)}}};const an=(0,r.Z)(nn,[["render",tn]]);var rn=an,ln={name:"MyFriend",components:{FriendList:Ji,FriendSearch:rn},data(){return{num:1}},computed:{},methods:{}};const cn=(0,r.Z)(ln,[["render",xi]]);var dn=cn;const mn={class:"container"},hn={class:"profileTitle"},un={style:{"font-family":"'NeoDunggeunmo Code'"},class:"mt-0"},gn={class:"myProfileLayout"},pn={class:"profileDiv"},yn={class:"profilePic"},fn=["src"],wn={class:"introduce"},bn={style:{"font-family":"'NeoDunggeunmo Code'"}},vn=(0,i._)("button",{type:"button",class:"introBtn","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},[(0,i._)("span",null,"수정")],-1),Cn={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},_n={class:"modal-dialog"},Sn={class:"modal-content modalDesign"},In=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"},"프로필 정보 수정"),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),kn={class:"modal-body"},Tn={class:"chooseImage"},Rn=(0,i._)("div",{class:"profilePicTitle"},[(0,i._)("h2",{style:{color:"black"}},"프로필 사진 선택")],-1),Dn=(0,i._)("h1",null,"마피아",-1),Nn=[Dn],xn=(0,i._)("h1",null,"시민",-1),En=[xn],Vn=(0,i._)("h1",null,"경찰",-1),On=[Vn],Pn=(0,i._)("h1",null,"의사",-1),Mn=[Pn],Ln={class:"modal-footer"},Un=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"취소",-1),jn=(0,i._)("hr",null,null,-1),zn={class:"recordEtc"};function Fn(e,t,s,n,a,r){const l=(0,i.up)("record-detail");return(0,i.wg)(),(0,i.iD)("div",mn,[(0,i._)("div",hn,[(0,i._)("h1",un,(0,$.zw)(a.user.nickname)+"의 프로필입니다",1)]),(0,i._)("div",gn,[(0,i._)("div",pn,[(0,i._)("div",yn,[(0,i._)("img",{style:{width:"290px",height:"290px","border-radius":"10px"},src:"/homedesign/images/"+e.userInfo.imagePath},null,8,fn)]),(0,i._)("div",wn,[(0,i._)("span",bn,(0,$.zw)(a.user.intro),1)]),vn,(0,i._)("div",Cn,[(0,i._)("div",_n,[(0,i._)("div",Sn,[In,(0,i._)("div",kn,[(0,i.wy)((0,i._)("input",{style:{color:"black",width:"90%"},type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.user.intro=e)},null,512),[[o.nr,a.user.intro]]),(0,i._)("div",Tn,[Rn,(0,i._)("button",{class:"choicePic",onClick:t[1]||(t[1]=(...e)=>r.setMafiaPic&&r.setMafiaPic(...e))},Nn),(0,i._)("button",{class:"choicePic",onClick:t[2]||(t[2]=(...e)=>r.setCitizenPic&&r.setCitizenPic(...e))},En),(0,i._)("button",{class:"choicePic",onClick:t[3]||(t[3]=(...e)=>r.setPolicePic&&r.setPolicePic(...e))},On),(0,i._)("button",{class:"choicePic",onClick:t[4]||(t[4]=(...e)=>r.setDoctorPic&&r.setDoctorPic(...e))},Mn)])]),(0,i._)("div",Ln,[Un,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>r.userUpdate&&r.userUpdate(...e)),"data-bs-dismiss":"modal"},"저장")])])])])]),jn,(0,i._)("div",zn,[(0,i.Wm)(l)])])])}const $n={class:"winRateTest"};function Gn(e,t,s,o,n,a){return(0,i.wg)(),(0,i.iD)("ul",$n,[(0,i._)("li",null,[(0,i._)("h2",null,"총 승률: "+(0,$.zw)(n.winRate.toFixed(0))+"%",1)]),(0,i._)("li",null,[(0,i._)("h3",null,"마피아 승률: "+(0,$.zw)(n.mafiaWinRate.toFixed(0))+"%",1)]),(0,i._)("li",null,[(0,i._)("h3",null,"시민 승률: "+(0,$.zw)(n.citizenWinRate.toFixed(0))+"%",1)]),(0,i._)("li",null,[(0,i._)("h3",null,"의사 승률: "+(0,$.zw)(n.doctorWinRate.toFixed(0))+"%",1)]),(0,i._)("li",null,[(0,i._)("h3",null,"교주 승률: "+(0,$.zw)(n.policeWinRate.toFixed(0))+"%",1)])])}const Wn="memberStore";var An={name:"RecordDetail",components:{},data(){return{mafiaWinRate:"",policeWinRate:"",doctorWinRate:"",citizenWinRate:"",winRate:""}},computed:{...(0,k.rn)(Wn,["record"])},methods:{},created(){console.log(this.record);let e=(this.record[0].winCount+this.record[1].winCount+this.record[2].winCount+this.record[3].winCount)/(this.record[0].winCount+this.record[1].winCount+this.record[2].winCount+this.record[3].winCount+this.record[0].loseCount+this.record[1].loseCount+this.record[2].loseCount+this.record[3].loseCount+this.record[0].drawCount+this.record[1].drawCount+this.record[2].drawCount+this.record[3].drawCount);this.record[0].winCount+this.record[1].winCount+this.record[2].winCount+this.record[3].winCount+this.record[0].loseCount+this.record[1].loseCount+this.record[2].loseCount+this.record[3].loseCount+this.record[0].drawCount+this.record[1].drawCount+this.record[2].drawCount+this.record[3].drawCount===0?this.winRate=0:this.winRate=100*e.toFixed(2),console.log(this.record[0]),console.log("해치웠나?"),this.record.forEach((e=>{if(console.log("여기 확인"),console.log(e),"mafia"===e.type)if(console.log("이부분은 마피아의 기록"),0===e.winCount)this.mafiaWinRate=0;else{let t=e.winCount/(e.winCount+e.drawCount+e.loseCount);this.mafiaWinRate=100*t.toFixed(2),console.log("d")}else if("police"===e.type)if(console.log("이부분은 경찰의 기록"),0===e.winCount)this.policeWinRate=0;else{let t=e.winCount/(e.winCount+e.drawCount+e.loseCount);this.policeWinRate=100*t.toFixed(2),console.log("d")}else if("doctor"===e.type)if(console.log("이부분은 의사의 기록"),0===e.winCount)this.doctorWinRate=0;else{let t=e.winCount/(e.winCount+e.drawCount+e.loseCount);this.doctorWinRate=100*t.toFixed(2),console.log("d")}else if("citizen"===e.type)if(console.log("이부분은 시민의 기록"),0===e.winCount)this.citizenWinRate=0;else{let t=e.winCount/(e.winCount+e.drawCount+e.loseCount);this.citizenWinRate=100*t.toFixed(2),console.log("d")}}))}};const Jn=(0,r.Z)(An,[["render",Gn]]);var qn=Jn;const Bn="memberStore";var Zn={name:"MyProfile",components:{RecordDetail:qn},computed:{...(0,k.rn)(Bn,["userInfo","isLogin"])},data(){return{num:1,user:{},image1:"profile_mafia.png",image2:"profile_citizen.png",image3:"profile_headmaster.png",image4:"profile_doctor.png"}},created(){this.user=this.userInfo,console.log(this.userInfo),console.log(this.isLogin)},watch:{userInfo(e){console.log(e),this.user=this.userInfo}},methods:{...(0,k.nv)(Bn,["modifyMember"]),userUpdate(){console.log("지금"),console.log(this.user.imagePath),this.modifyMember(this.user)},mvMyPage(){this.$router.push({name:"profile"})},setMafiaPic(){this.user.imagePath=this.image1},setCitizenPic(){this.user.imagePath=this.image2},setPolicePic(){this.user.imagePath=this.image3},setDoctorPic(){this.user.imagePath=this.image4}}};const Hn=(0,r.Z)(Zn,[["render",Fn]]);var Yn=Hn;const Kn="mypageStore",Qn="memberStore";var Xn={name:"MyPage",components:{MyFriend:dn,MyProfile:Yn,NavHeader:bt},data(){return{num:1,showNav:!0}},computed:{...(0,k.rn)(Qn,["userInfo"])},methods:{...(0,k.nv)(Kn,["getFriendsStore"]),scrollEvent(){scrollY<=10?(this.showNav=!0,console.log("지금 보여야됨")):this.showNav=!1}},mounted(){document.addEventListener("scroll",this.scrollEvent)},unmounted(){document.removeEventListener("scroll",this.scrollEvent)},created(){console.log(this.userInfo),this.getFriendsStore(this.userInfo.id)}};const ea=(0,r.Z)(Xn,[["render",ki]]);var ta=ea;const sa={class:"container"},oa={class:"mb-3"},ia=(0,i._)("label",{for:"InputPassword",class:"form-label"},"비밀번호",-1),na=(0,i._)("div",{class:"mb-3"},[(0,i._)("label",{for:"InputPasswordCheck",class:"form-label"},"비밀번호 확인"),(0,i._)("input",{type:"password",class:"form-control",id:"InputPasswordCheck"})],-1),aa={class:"mb-3"},ra=(0,i._)("label",{for:"InputNickname",class:"form-label"},"닉네임",-1),la={class:"mb-3"},ca=(0,i._)("label",{for:"InputEmail",class:"form-label"},"Email",-1);function da(e,t,s,n,a,r){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("form",sa,[(0,i._)("div",oa,[ia,(0,i.wy)((0,i._)("input",{type:"password",class:"form-control",id:"InputPassword","onUpdate:modelValue":t[0]||(t[0]=e=>a.userPw=e)},null,512),[[o.nr,a.userPw]])]),na,(0,i._)("div",aa,[ra,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",id:"InputNickname","onUpdate:modelValue":t[1]||(t[1]=e=>a.userNickname=e)},null,512),[[o.nr,a.userNickname]])]),(0,i._)("div",la,[ca,(0,i.wy)((0,i._)("input",{type:"email",class:"form-control",id:"InputEmail","onUpdate:modelValue":t[2]||(t[2]=e=>a.userEmail=e)},null,512),[[o.nr,a.userEmail]])]),(0,i._)("button",{type:"submit",class:"btn btn-primary",onClick:t[3]||(t[3]=(...t)=>e.edit&&e.edit(...t))},"변경")])])}var ma={name:"editUserView",data(){return{userId:"",userPw:"",userNickname:"",userEmail:""}}};const ha=(0,r.Z)(ma,[["render",da]]);var ua=ha;const ga={class:"w3-main mx-5"},pa={class:"w3-row"},ya={class:"w3-col m8"},fa={class:"w3-row"},wa={class:"mx-2 my-2 w3-container border border-secondary w3-col m6",id:"video-container"},ba=(0,i._)("button",null,"vote",-1),va={class:"w3-col m4"},Ca=(0,i._)("ul",{class:"mx-2 my-2 w3-container border border-secondary"},[(0,i._)("li",null,"직업"),(0,i._)("li",null,"미션")],-1),_a={class:"mx-2 my-2 w3-container border border-secondary w3-col m6",id:"video-container"};function Sa(e,t,s,o,n,a){const r=(0,i.up)("ingame-nav"),l=(0,i.up)("user-video"),c=(0,i.up)("mission-user-video");return(0,i.wg)(),(0,i.iD)("div",{class:(0,$.C_)({ingameNight:n.progress.isNight,ingameDay:n.progress.isDay,ingameDayVote:n.progress.isVoteDay,ingameDayVoteResult:n.progress.isVoteDayResult,ingameNightResult:n.progress.isNightResult})},[(0,i._)("div",ga,[(0,i.Wm)(r,{class:"mb-3"}),(0,i._)("div",pa,[(0,i._)("div",ya,[(0,i._)("div",fa,[(0,i._)("div",wa,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.subscribers,(e=>((0,i.wg)(),(0,i.j4)(l,{key:e.stream.connection.connectionId,"stream-manager":e,nickname:this.myUserName},null,8,["stream-manager","nickname"])))),128)),ba])])]),(0,i._)("div",va,[Ca,(0,i._)("div",_a,[(0,i.kq)("",!0),((0,i.wg)(),(0,i.j4)(c,{key:1,"stream-manager":n.publisher,gameInfo:n.myInfo},null,8,["stream-manager","gameInfo"]))])])])])],2)}const Ia="memberStore",ka="ingameStore",Ta="roomdataStore";No().defaults.headers.post["Content-Type"]="application/json";const Ra="https://i7e107.p.ssafy.io:6443",Da="MY_SECRET";var Na={name:"IngameView",components:{IngameNav:Ro,UserVideo:$o,MissionUserVideo:ci},data(){return{OV:void 0,session:void 0,publisher:void 0,subscribers:[],mySessionId:this.$route.roomnumber,myUserName:"",gameInfos:[],myInfo:{},progress:{isDay:!0,isVoteDay:!1,isVoteDayResult:!1,isNight:!1,isNightResult:!1},missionWin:!1,voteNo:1}},computed:{...(0,k.rn)(Ia,["userInfo"]),...(0,k.Se)(Ta,["roomNo","roomTitle","isCaptain","isConnected"]),...(0,k.Se)(Ia,["isLogin"]),...(0,k.Se)(ka,["job"]),...(0,k.nv)(Ta,["deleteRoom","enterRoom","saveRoomTitle","saveIsCaptain","saveIsConnected"])},created(){this.mySessionId="a",this.myUserName=this.userInfo.nickname,this.myUserId=this.userInfo.id,this.joinSession(),this.myInfo={id:this.userInfo.id,nickname:this.userInfo.nickname,isAlive:!0,color:"",job:"",voted:[]},this.connect(),this.nightResultToDay()},mounted(){console.log(this.isConnected)},methods:{joinSession(){this.OV=new xo.Dn,this.session=this.OV.initSession(),this.session.on("streamCreated",(({stream:e})=>{const t=this.session.subscribe(e);this.subscribers.push(t);const s=t.stream.connection.data.split('"');console.log(`tmp : ${s}`);const o=s[3].split(",");console.log(`userData : ${o}`),console.log(`id : ${o[0]}`),console.log(`nick : ${o[1]}`),this.gameInfos.push({id:o[0],nickname:o[1],isAlive:!0,color:"",voted:[]})})),this.session.on("streamDestroyed",(({stream:e})=>{const t=this.subscribers.indexOf(e.streamManager,0);t>=0&&this.subscribers.splice(t,1)})),this.session.on("exception",(({exception:e})=>{console.warn(e)})),this.getToken(this.mySessionId).then((e=>{this.session.connect(e,{clientData:`${this.myUserId}, ${this.myUserName}`}).then((()=>{let e=this.OV.initPublisher(void 0,{audioSource:void 0,videoSource:void 0,publishAudio:!0,publishVideo:!0,resolution:"640x480",frameRate:30,insertMode:"APPEND",mirror:!1});this.publisher=e,this.session.publish(this.publisher)})).catch((e=>{console.log("There was an error connecting to the session:",e.code,e.message)}))})),window.addEventListener("beforeunload",this.leaveSession)},leaveSession(){this.session&&this.session.disconnect(),this.session=void 0,this.mainStreamManager=void 0,this.publisher=void 0,this.subscribers=[],this.OV=void 0,window.removeEventListener("beforeunload",this.leaveSession)},getToken(e){return this.createSession(e).then((e=>this.createToken(e)))},createSession(e){return new Promise(((t,s)=>{No().post(`${Ra}/openvidu/api/sessions`,JSON.stringify({customSessionId:e}),{auth:{username:"OPENVIDUAPP",password:Da}}).then((e=>e.data)).then((e=>t(e.id))).catch((o=>{409===o.response.status?t(e):(console.warn(`No connection to OpenVidu Server. This may be a certificate error at ${Ra}`),window.confirm(`No connection to OpenVidu Server. This may be a certificate error at ${Ra}\n\nClick OK to navigate and accept it. If no certificate warning is shown, then check that your OpenVidu Server is up and running at "${Ra}"`)&&location.assign(`${Ra}/accept-certificate`),s(o.response))}))}))},createToken(e){return new Promise(((t,s)=>{No().post(`${Ra}/openvidu/api/sessions/${e}/connection`,{},{auth:{username:"OPENVIDUAPP",password:Da}}).then((e=>e.data)).then((e=>t(e.token))).catch((e=>s(e.response)))}))},dayToDayVote(){console.log("타이머 도나?"),this.progress.isDay=!1,this.progress.isVoteDay=!0,this.clearId=setTimeout((()=>{this.voteToDayResult()}),3e3)},voteToDayResult(){this.progress.isVoteDay=!1,this.progress.isVoteDayResult=!0,setTimeout((()=>{this.dayResultToNightVote()}),3e3)},dayResultToNightVote(){this.progress.isVoteDayResult=!1,this.progress.isNight=!0,setTimeout((()=>{this.nightVoteToNightResult()}),3e3)},nightVoteToNightResult(){this.progress.isNight=!1,this.progress.isNightResult=!0,setTimeout((()=>{this.nightResultToDay()}),3e3)},nightResultToDay(){this.progress.isNightResult=!1,this.progress.isDay=!0,this.isSkiped=!1,console.log("지금낮인데 뭐 뜨냐?"),console.log(this.progress),setTimeout((()=>{this.dayToDayVote()}),3e3)},connect(){const e="http://localhost:8080/roomSocket";let t=new(ts())(e);this.stompClient=Xt().over(t),console.log(`소켓 연결을 시도합니다. 서버 주소: ${e}`),this.stompClient.connect({},(e=>{this.connected=!0,console.log("소켓 연결 성공",e),console.log("======================됐나?======================="),this.stompClient.subscribe(`/sendMafia/${this.mySessionId}/${this.userInfo.id}`,(e=>{console.log("구독으로 받은 게임 정보입니다.",e.body);const t=JSON.parse(e.body);this.myInfo.job=t.job,t.joinUsers.forEach((e=>{this.gameInfos.forEach((t=>{e.id===t.id&&(t.color=e.color)})),this.nightResultToDay()}))})),this.stompClient.subscribe(`/sendMafia/${this.mySessionId}`,(e=>{console.log("구독으로 받은 게임 정보입니다.",e.body);const t=JSON.parse(e.body);"voteDay"===t.progress&&this.gameInfos.forEach((e=>{this.myInfo.id===t.votedId?this.myInfo.push(t.id):e.id===t.votedId&&e.voted.push(t.id)})),"voteDayFinish"===t.progress&&(""!==t.winJob?this.$router.push({name:"final",params:{roomnumber:this.mySessionId}}):""===t.id?(this.progress.isVoteDay=!1,this.progress.isVoteDayResult=!0):this.gameInfos.forEach((e=>{this.myInfo.id===t.id?this.myInfo.isAlive=!1:e.id===t.id&&(e.isAlive=!1)}))),"voteNight"===t.progress&&console.log(t)}))}),(e=>{console.log("소켓 연결 실패",e),this.connected=!1}))},sendVote(e){if(this.stompClient&&this.stompClient.connected){const t={progress:"voteDay",roomNo:this.mySessionId,id:this.myUserId,nickname:this.userInfo.nickname,job:this.myInfo.job,vote:e,ifWin:this.missionWin};this.progress.isNight&&(t.progress="voteNight"),console.log(t),this.stompClient.send("/receiveMafia",JSON.stringify(t),{})}},doVote(e){1===this.voteNo&&(this.progress.isVoteDay||this.progress.isNight)&&(this.sendVote(e.id),this.voteNo=0,console.log(`투표한 id ${e.id}`))}}};const xa=(0,r.Z)(Na,[["render",Sa]]);var Ea=xa;const Va={class:"curtain"},Oa={class:"curtain__wrapper"},Pa={class:"curtain__prize"},Ma={class:"gameEndBackground"},La={class:"mainCurtain"},Ua={style:{"font-size":"70px","padding-top":"150px",", margin-top":"0px",color:"white"}},ja={style:{height:"150px"}},za=(0,i._)("br",null,null,-1),Fa={href:"/lobby"},$a=(0,i._)("h3",null,"로비로 이동",-1),Ga=[$a],Wa={style:{height:"250px"}},Aa={class:"d-flex justify-content-center",style:{margin:"auto"}},Ja=["src"];function qa(e,t,s,n,a,r){return(0,i.wg)(),(0,i.iD)("div",Va,[(0,i._)("div",Oa,[a.showblackGround?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,$.C_)({blackGround:a.isDark,blackGroundOut:!a.isDark})},null,2)):(0,i.kq)("",!0),(0,i._)("div",{class:(0,$.C_)({curtainLeftPanel:!a.curtainOut,curtainLeftPanelOpen:a.curtainOut})},null,2),(0,i._)("div",{class:(0,$.C_)({curtainRightPanel:!a.curtainOut,curtainRightPanelOpen:a.curtainOut})},null,2),(0,i._)("div",Pa,[(0,i._)("div",Ma,[(0,i._)("div",La,[(0,i._)("h1",Ua,(0,$.zw)(a.job)+" 승리!",1),(0,i._)("div",ja,[za,(0,i._)("a",Fa,[(0,i.wy)((0,i._)("div",{onClick:t[0]||(t[0]=(...t)=>e.returnLobby&&e.returnLobby(...t)),class:"w3-container my-3 w3-white",style:{width:"200px",margin:"auto","border-radius":"10px",cursor:"pointer"}},Ga,512),[[o.F8,!a.showblackGround]])])]),(0,i._)("div",Wa,[(0,i._)("div",Aa,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.winMember,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i._)("h3",null,(0,$.zw)(e.nickname),1),(0,i._)("img",{class:"winCharacter",src:"/../../homedesign/images/mafia_"+e.color+".png",alt:""},null,8,Ja)])))),128))])])])])])])])}const Ba="ingameStore",Za="roomdataStore",Ha="memberStore";var Ya={name:"GameEndView",components:{},data(){return{job:"시민",curtainOut:!1,isDark:!0,showblackGround:!0,winMember:[]}},computed:{...(0,k.rn)(Ha,["userInfo"]),...(0,k.Se)(Ba,["gameResult"]),...(0,k.Se)(Za,["roomNo","password"])},methods:{...(0,k.nv)(Za,["enterRoom"]),returnWaitRoom(){const e={no:this.roomNo,info:{id:this.userInfo.id,no:this.roomNo,password:this.password}};this.enterRoom(e)}},created(){console.log(this.gameResult),console.log(this.gameResult[0]),"mafia"===this.gameResult[0].winJob?this.job="마피아":"police"===this.gameResult[0].winJob?this.job="교주":this.job="시민",this.gameResult.forEach((e=>{this.winMember.push({color:e.color,nickname:e.nickname})}))},mounted(){setTimeout((()=>{this.isDark=!1}),1e3),setTimeout((()=>{this.curtainOut=!0}),2e3),setTimeout((()=>{this.showblackGround=!1}),4500)}};const Ka=(0,r.Z)(Ya,[["render",qa]]);var Qa=Ka;const Xa={class:"ingameBackground"},er=(0,i._)("div",{class:"voteItem"},null,-1),tr=[er],sr={key:0},or=(0,i.uE)('<div class="mafiaImage"></div><div style="width:65%;margin-left:120px;margin-top:390px;"><h3 class="">당신의 직업: 마피아</h3><h3 class="">밤마다 한명의 플레이어를 죽일 수 있습니다.</h3><h3 class="">모든 플레이어를 죽이면 승리!</h3></div>',2),ir=[or],nr={key:1},ar=(0,i.uE)('<div class="doctorImage"></div><div style="width:65%;margin-left:120px;margin-top:390px;"><h3 class="">당신의 직업: 의사</h3><h3 class="">밤마다 한명의 플레이어를 마피아로 부터 보호할 수 있습니다.</h3><h3 class="">마피아를 잡아내면 승리!</h3></div>',2),rr=[ar],lr={key:2},cr=(0,i.uE)('<div class="headmasterImage"></div><div style="width:65%;margin-left:120px;margin-top:390px;"><h3 class="">당신의 직업: 교주</h3><h3 class="">특정 동작을 수행할 때 마다 신자 카운트가 증가합니다.</h3><h3 class="">다른 플레이어 수 만큼 신자 카운트를 쌓으면 승리!</h3></div>',2),dr=[cr],mr={key:3},hr=(0,i.uE)('<div class="citizenImage"></div><div style="width:65%;margin-left:120px;margin-top:120px;"><h3 class="">당신의 직업: 시민</h3><h3 class="">당신은 선량한 시민입니다. 다른 사람들과 협력해 마피아를 잡아내세요.</h3><h3 class="">마피아를 잡아내면 승리!</h3></div>',2),ur=[hr];function gr(e,t,s,o,n,a){return(0,i.wg)(),(0,i.iD)("div",Xa,[(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>a.openJobRoll&&a.openJobRoll(...e)),class:(0,$.C_)({jobRollFormSide:!n.isjobRollCenter,jobRollFormCenter:n.isjobRollCenter})},tr,2),n.isJobRollOpen?((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:t[1]||(t[1]=(...e)=>a.switchJobRoll&&a.switchJobRoll(...e)),class:"openedJobRoll"},["mafia"===n.job?((0,i.wg)(),(0,i.iD)("div",sr,ir)):(0,i.kq)("",!0),"doctor"===n.job?((0,i.wg)(),(0,i.iD)("div",nr,rr)):(0,i.kq)("",!0),"headmaster"===n.job?((0,i.wg)(),(0,i.iD)("div",lr,dr)):(0,i.kq)("",!0),"citizen"===n.job?((0,i.wg)(),(0,i.iD)("div",mr,ur)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)])}var pr={data(){return{isjobRollCenter:!0,isJobRollOpen:!1,job:"citizen"}},methods:{switchJobRoll(){this.isjobRollCenter=!1,this.isJobRollOpen=!1},openJobRoll(){this.isjobRollCenter?this.isJobRollOpen=!0:(setTimeout((()=>{this.isJobRollOpen=!0}),700),this.isjobRollCenter||(this.isjobRollCenter=!0))}},computed:{},watch(){}};const yr=(0,r.Z)(pr,[["render",gr]]);var fr=yr;const wr=(0,i._)("div",null,"투표결과 확인 페이지",-1),br=(0,i._)("br",null,null,-1),vr=(0,i._)("br",null,null,-1),Cr=(0,i._)("br",null,null,-1),_r={key:0,style:{"text-align":"center",color:"black"}},Sr={key:1,style:{"text-align":"center",color:"white"}},Ir=(0,i.Uk)("밤 사이에"),kr=(0,i._)("br",null,null,-1),Tr=(0,i._)("br",null,null,-1),Rr=(0,i.Uk)("사망하였습니다,,,"),Dr={key:2};function Nr(e,t,s,o,n,a){return(0,i.wg)(),(0,i.iD)("div",{class:(0,$.C_)({ingameNight:n.progress.isNight,ingameDay:n.progress.isDay,ingameDayVote:n.progress.isVoteDay,ingameDayVoteResult:n.progress.isVoteDayResult,ingameNightResult:n.progress.isNightResult})},[wr,br,vr,Cr,(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>a.transResultPage&&a.transResultPage(...e))},"바껴라!!"),(0,i._)("div",{class:(0,$.C_)({voteResultDay:n.progress.isVoteDayResult,voteResultNight:n.progress.isNightResult})},[n.deadColor&&n.progress.isVoteDayResult?((0,i.wg)(),(0,i.iD)("h1",_r,(0,$.zw)(n.showingMsg),1)):(0,i.kq)("",!0),n.deadColor&&n.progress.isNightResult?((0,i.wg)(),(0,i.iD)("h1",Sr,[Ir,kr,(0,i.Uk)((0,$.zw)(n.whoIsGone),1),Tr,Rr])):(0,i.kq)("",!0),n.deadColor?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("h1",Dr,"아무 일 없이 지나감")),(0,i._)("div",{onClick:t[1]||(t[1]=(...e)=>a.getOut&&a.getOut(...e)),class:(0,$.C_)({redChar:"red"===n.deadColor,redCharGone:"red"===n.deadColor&&n.isGone,blueChar:"blue"===n.deadColor,blueCharGone:"blue"===n.deadColor&&n.isGone,whiteChar:"white"===n.deadColor,whiteCharGone:"white"===n.deadColor&&n.isGone,blackChar:"black"===n.deadColor,blackCharGone:"black"===n.deadColor&&n.isGone,yellowChar:"yellow"===n.deadColor,yellowCharGone:"yellow"===n.deadColor&&n.isGone})},null,2),n.deadColor?((0,i.wg)(),(0,i.iD)("div",{key:3,class:(0,$.C_)({deadShadow:!0,deadShadowGone:n.isGone})},null,2)):(0,i.kq)("",!0)],2)],2)}var xr={data(){return{progress:{isVoteDayResult:!0,isNightResult:!1},deadColor:"",isGone:!1,whoIsGone:"임시닉네임",msgCnt:0,showingMsg:"",stopCnt:0,stopCnt2:0}},created(){this.deadColor="red",this.stopCnt=setInterval(this.typeEffect,150)},methods:{typeEffect2(){this.msgCnt+=1,this.showingMsg=`밤 사이에 ${this.whoIsGone} 님이 사망하였습니다,,,`.slice(0,this.msgCnt),50===this.msgCnt&&(clearInterval(this.stopCnt2),this.stopCnt2=0)},typeEffect(){this.msgCnt+=1,this.showingMsg=`투표 결과 ${this.whoIsGone} 님이 퇴출되었습니다!`.slice(0,this.msgCnt),console.log("hi"),50===this.msgCnt&&(clearInterval(this.stopCnt),this.stopCnt=0)},getOut(){"red"===this.deadColor&&(this.isGone=!0)},transResultPage(){this.progress.isVoteDayResult=!this.progress.isVoteDayResult,this.progress.isNightResult=!this.progress.isNightResult,this.isGone=!1,this.msgCnt=0},redToBlue(){this.deadColor="blue",setTimeout((()=>{this.blueToRed()}),1e4)},blueToRed(){this.deadColor="red",setTimeout((()=>{this.redToBlue()}),1e4)}}};const Er=(0,r.Z)(xr,[["render",Nr]]);var Vr=Er;const Or={class:"profilePageBackground"},Pr={class:"modal fade powerModal",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Mr={class:"modal-dialog"},Lr={class:"modal-content modalDesign"},Ur=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"},"프로필 정보 수정"),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),jr={class:"modal-body"},zr={class:"chooseImage"},Fr=(0,i._)("div",{class:"profilePicTitle"},[(0,i._)("h2",{style:{color:"black"}},"프로필 사진 선택")],-1),$r=(0,i._)("h1",null,"마피아",-1),Gr=[$r],Wr=(0,i._)("h1",null,"시민",-1),Ar=[Wr],Jr=(0,i._)("h1",null,"교주",-1),qr=[Jr],Br=(0,i._)("h1",null,"의사",-1),Zr=[Br],Hr={class:"modal-footer"},Yr=(0,i._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"취소",-1),Kr={key:0,class:"myProfileTestLayOut"},Qr=(0,i._)("h2",{class:"profileName"},"내 정보",-1),Xr=["src"],el={class:"letMeIntroduce"},tl=(0,i._)("div",{class:"modifyUserBtn","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},[(0,i._)("h1",null,"수정")],-1),sl={key:1,class:"myFriendTestLayout"},ol=(0,i._)("h2",{class:"profileName"},"친구목록",-1);function il(e,t,s,n,a,r){const l=(0,i.up)("nav-header"),c=(0,i.up)("record-detail"),d=(0,i.up)("my-friend");return(0,i.wg)(),(0,i.iD)("div",Or,[(0,i.Wm)(l),(0,i._)("div",Pr,[(0,i._)("div",Mr,[(0,i._)("div",Lr,[Ur,(0,i._)("div",jr,[(0,i.wy)((0,i._)("input",{style:{color:"black",width:"90%"},type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.user.intro=e)},null,512),[[o.nr,a.user.intro]]),(0,i._)("div",zr,[Fr,(0,i._)("button",{class:"choicePic",onClick:t[1]||(t[1]=(...e)=>r.setMafiaPic&&r.setMafiaPic(...e))},Gr),(0,i._)("button",{class:"choicePic",onClick:t[2]||(t[2]=(...e)=>r.setCitizenPic&&r.setCitizenPic(...e))},Ar),(0,i._)("button",{class:"choicePic",onClick:t[3]||(t[3]=(...e)=>r.setPolicePic&&r.setPolicePic(...e))},qr),(0,i._)("button",{class:"choicePic",onClick:t[4]||(t[4]=(...e)=>r.setDoctorPic&&r.setDoctorPic(...e))},Zr)])]),(0,i._)("div",Hr,[Yr,(0,i._)("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>r.userUpdate&&r.userUpdate(...e)),"data-bs-dismiss":"modal"},"저장")])])])]),a.whichPage?((0,i.wg)(),(0,i.iD)("div",Kr,[Qr,(0,i._)("img",{class:"myProfileImage",src:"/homedesign/images/"+e.userInfo.imagePath},null,8,Xr),(0,i._)("div",el,[(0,i._)("h3",null,(0,$.zw)(e.userInfo.intro),1)]),tl,(0,i.Wm)(c)])):(0,i.kq)("",!0),a.whichPage?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",sl,[ol,(0,i.Wm)(d)])),a.whichPage?((0,i.wg)(),(0,i.iD)("div",{key:2,onClick:t[6]||(t[6]=(...e)=>r.changePage&&r.changePage(...e)),class:"goFriendPage"})):(0,i.kq)("",!0),a.whichPage?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:3,onClick:t[7]||(t[7]=(...e)=>r.changePage&&r.changePage(...e)),class:"goMyprofilePage"}))])}const nl="mypageStore",al="memberStore";var rl={components:{RecordDetail:qn,MyFriend:dn,NavHeader:bt},computed:{...(0,k.rn)(al,["userInfo"])},data(){return{whichPage:!0,user:{},image1:"profile_mafia.png",image2:"profile_citizen.png",image3:"profile_headmaster.png",image4:"profile_doctor.png"}},methods:{...(0,k.nv)(nl,["getFriendsStore"]),...(0,k.nv)(al,["modifyMember"]),changePage(){this.whichPage=!this.whichPage,console.log(this.whichPage),this.user=this.userInfo,this.getFriendsStore(this.userInfo.id)},userUpdate(){console.log("지금"),console.log(this.user.imagePath),this.modifyMember(this.user)},setMafiaPic(){this.user.imagePath=this.image1},setCitizenPic(){this.user.imagePath=this.image2},setPolicePic(){this.user.imagePath=this.image3},setDoctorPic(){console.log(this.user),this.user.imagePath=this.image4,console.log("의사사진 선택")}},async created(){console.log(this.userInfo),console.log(this.user),console.log("==============="),await this.getFriendsStore(this.userInfo.id),console.log("친구정보 받아지나?"),this.user=this.userInfo,console.log(this.userInfo),console.log(this.user)},watch:{userInfo(){this.user=this.userInfo}}};const ll=(0,r.Z)(rl,[["render",il]]);var cl=ll;const dl=[{path:"/myPage",name:"myPageTest",component:cl},{path:"/voteResult",name:"VoteResult",component:Vr},{path:"/testvote",name:"TestVote",component:fr},{path:"/vote",name:"VoteView",component:Ea},{path:"/",name:"login",component:N},{path:"/signup",name:"signup",component:F},{path:"/lobby",name:"lobby",component:Tt},{path:"/:roomnumber/wait",name:"wait",component:as},{path:"/:roomnumber/ingame",name:"ingame",component:fi},{path:"/:roomnumber/final",name:"final",component:vi},{path:"/:id_pk/profile",name:"profile",component:ta},{path:"/:id_pk/edit",name:"edituser",component:ua},{path:"/game/end",name:"gameend",component:Qa}],ml=(0,d.p7)({history:(0,d.PO)("/"),routes:dl});var hl=ml,ul=s(4702),gl=s(6245);const pl="https://i7e107.p.ssafy.io";function yl(){const e=No().create({baseURL:pl,headers:{"Content-type":"application/json"}});return e}const fl=yl();async function wl(e,t,s){await fl.post("/api/user/login",JSON.stringify(e)).then(t).catch(s)}async function bl(e,t,s){fl.defaults.headers["access-token"]=sessionStorage.getItem("access-token"),await fl.get(`/api/user/info/${e}`).then(t).catch(s)}async function vl(e){await fl.put("/api/user",JSON.stringify(e))}async function Cl(e,t,s){await fl.post("/api/user",JSON.stringify(e)).then(t).catch(s)}const _l={namespaced:!0,state:{isLogin:!1,isLoginError:!1,userInfo:null,isSignupError:!1,record:null},getters:{isLogin:function(e){return e.isLogin},checkUserInfo:function(e){return e.userInfo}},mutations:{SET_IS_LOGIN:(e,t)=>{e.isLogin=t},SET_IS_LOGIN_ERROR:(e,t)=>{e.isLoginError=t},SET_USER_INFO:(e,t)=>{e.isLogin=!0,e.userInfo=t,console.log("======================"),console.log(t),console.log(e.userInfo)},SET_IS_SIGNUP_ERROR:(e,t)=>{e.isSignupError=t},SET_RECORD:(e,t)=>{e.record=t}},actions:{async userConfirm({commit:e},t){await wl(t,(t=>{if("success"===t.data.message){console.log("success 됐나?");let s=t.data["access-token"],o=t.data["record"];e("SET_RECORD",o),e("SET_IS_LOGIN",!0),e("SET_IS_LOGIN_ERROR",!1),sessionStorage.setItem("access-token",s)}else e("SET_IS_LOGIN",!1),e("SET_IS_LOGIN_ERROR",!0)}),(()=>{}))},async getUserInfo({commit:e},t){let s=(0,gl.Z)(t);await bl(s.id,(t=>{"success"===t.data.message?(console.log(t.data.userInfo),e("SET_USER_INFO",t.data.userInfo)):console.log("유저 정보 없음")}),(e=>{console.log(e)}))},modifyMember({commit:e},t){vl(t),console.log("어떻게 들어가는지 확인 한번만"),console.log(t.imagePath),e("SET_USER_INFO",t)},async registerMember({commit:e},t){console.log(t),await Cl(t,(t=>{console.log(t),"success"===t.data?(e("SET_IS_LOGIN",!1),e("SET_IS_LOGIN_ERROR",!1),e("SET_IS_SIGNUP_ERROR",!1),e("SET_USER_INFO",null),console.log("성공")):e("SET_IS_SIGNUP_ERROR",!0)}),(t=>{console.log(t),e("SET_IS_SIGNUP_ERROR",!0)}))}}};var Sl=_l;const Il=yl();async function kl(e,t){Il.defaults.headers["access-token"]=sessionStorage.getItem("access-token"),await Il.get("/api/room").then(e).catch(t)}async function Tl(e,t,s){Il.defaults.headers["access-token"]=sessionStorage.getItem("access-token"),await Il.get(`/api/room/${e.roomNo}`,JSON.stringify(e.id)).then(t).catch(s)}const Rl={namespaced:!0,state:{friendList:"a",roomList:[{roomTitle:"방제1",roomNo:11,memberCnt:2,isPassword:0},{roomTitle:"방제2",roomNo:12,memberCnt:3,isPassword:1},{roomTitle:"방제3",roomNo:13,memberCnt:4,isPassword:1}],memberList:[{nickname:"nickname1",imagePath:"imagePath1"},{nickname:"nickname2",imagePath:"imagePath2"},{nickname:"nickname3",imagePath:"imagePath3"}]},getters:{friendList(e){return e.friendList},roomList(e){return e.roomList},memberList(e){return e.memberList}},mutations:{SET_FRIENDLIST:(e,t)=>e.friendList=t,SET_ROOMLIST:(e,t)=>e.roomList=t,SET_MEMBERLIST:(e,t)=>e.memberList=t},actions:{async getRoomList({commit:e}){console.log("방 정보 확인"),await kl((t=>{console.log("방정보 불러오기"),console.log(t.data),e("SET_ROOMLIST",t.data)}),(()=>{}))},async getMemberList({commit:e},t){await Tl(t,(t=>{console.log("==============================="),console.log(t.data),e("SET_MEMBERLIST",t.data)}),(()=>{}))}}};var Dl=Rl;const Nl=yl();async function xl(e,t,s){Nl.defaults.headers["access-token"]=sessionStorage.getItem("access-token"),await Nl.post("/api/room",JSON.stringify(e)).then(t).catch(s)}async function El(e,t,s){Nl.defaults.headers["access-token"]=sessionStorage.getItem("access-token"),await Nl.delete(`/api/room/${e}`).then(t).catch(s)}async function Vl(e,t,s){console.log("=========입장하기요청임========"),console.log(e.no),console.log(e.info),Nl.defaults.headers["access-token"]=sessionStorage.getItem("access-token"),await Nl.put(`/api/room/${e.no}`,JSON.stringify(e.info)).then(t).catch(s)}const Ol={namespaced:!0,state:{roomNo:-1,roomTitle:"뭐임?",isCaptain:!1,password:"",isConnected:!1},getters:{password(e){return e.password},roomNo(e){return e.roomNo},roomTitle(e){return e.roomTitle},isCaptain(e){return e.isCaptain},isConnected(e){return e.isConnected}},mutations:{SET_PASSWORD:(e,t)=>e.password=t,SET_ROOMNO:(e,t)=>e.roomNo=t,SET_ROOMTITLE:(e,t)=>e.roomTitle=t,SET_ISCAPTAIN:(e,t)=>e.isCaptain=t,SET_ISCONNECTED:(e,t)=>e.isConnected=t},actions:{savePassword({commit:e},t){e("SET_PASSWORD",t)},saveRoomNo({commit:e},t){e("SET_ROOMNO",t)},saveIsCaptain({commit:e},t){e("SET_ISCAPTAIN",t)},saveRoomTitle({commit:e},t){e("SET_ROOMTITLE",t)},saveIsConnected({commit:e},t){e("SET_ISCONNECTED",t)},async makeRoom({commit:e},t){console.log(t),await xl(t,(t=>{console.log("============================"),console.log("방만들기 성공"),console.log(t.data),e("SET_ROOMTITLE",t.data.roomTitle),e("SET_ROOMNO",t.data.no),e("SET_ISCAPTAIN",!0),console.log(t.data.roomTitle),console.log(t.data.no),hl.push({name:"wait",params:{roomnumber:t.data.no}})}),(()=>{}))},async deleteRoom({commit:e},t){await El(t,(()=>{e("SET_ROOMTITLE",""),e("SET_ISCAPTAIN",!1)}),(()=>{}))},async enterRoom({commit:e},t){await Vl(t,(()=>{console.log("========응답오나======="),e("SET_ROOMNO",t.no),e("SET_PASSWORD",t.password),hl.push({name:"wait",params:{roomnumber:t.no}})}),(()=>{}))}}};var Pl=Ol;const Ml=yl();async function Ll(e,t,s){await Ml.get(`/api/follow/${e}`).then(t).catch(s)}async function Ul(e,t,s){await Ml.post("/api/follow",JSON.stringify(e)).then(t).catch(s)}async function jl(e,t,s){console.log("되나,,,"),await Ml.delete("/api/follow",{data:e}).then(t).catch(s),console.log(JSON.stringify(e))}async function zl(e,t,s){await Ml.get("/api/user/list/",{params:e}).then(t).catch(s)}const Fl={namespaced:!0,state:{friendList:"",friendSearchList:"",isThereSearch:!0,followNum:0},getters:{},mutations:{SET_FRIENDS:(e,t)=>{e.friendList=t,e.followNum=t.length},SET_FRIENDS_SEARCH:(e,t)=>{e.friendSearchList=t},SET_SEARCH_ANSWER:(e,t)=>{e.isThereSearch=t},SET_FOLLOWERS_NUM_PLUS:(e,t)=>{e.followNum+=t},SET_FOLLOWERS_NUM_MINUS:(e,t)=>{e.followNum-=t}},actions:{async getFriendsStore({commit:e},t){await Ll(t,(t=>{0!=t.data.length?(console.log(t),console.log(t.data),console.log(t.data.length),e("SET_FRIENDS",t.data)):(e("SET_FRIENDS",t.data),console.log("친구 없음"))}),(e=>{console.log(e)}))},async followFriendStore({commit:e},t){await Ul(t,(t=>{"success"===t.data.message&&(console.log("팔로우 성공"),e("SET_FOLLOWERS_NUM_PLUS",1))}),(e=>{console.log(e)}))},async removeFriendStore({commit:e},t){console.log("팔취 들어가나?"),console.log(t),await jl(t,(t=>{console.log("응답 어떻게 오나?"),console.log(t),"success"===t.data.message&&(console.log("팔삭 성공"),e("SET_FOLLOWERS_NUM_MINUS",1))}),(e=>{console.log(e)}))},async searchFriendStore({commit:e},t){await zl(t,(t=>{0!=t.data.length?(console.log("검색 들어왔냐?"),e("SET_FRIENDS_SEARCH",t.data),console.log(t.data),e("SET_SEARCH_ANSWER",!0)):(console.log("검색결과 없음"),e("SET_SEARCH_ANSWER",!1),e("SET_FRIENDS_SEARCH",t.data))}),(t=>{console.log(t),e("SET_SEARCH_ANSWER",!1)}))}}};var $l=Fl;const Gl={namespaced:!0,state:{isDay:!0,missionClass:-1,missionCnt:0,ifWin:!1,gameResult:{winJob:"mafia",nickname:"박제학",color:""},absoluteTime:"",job:"mission",joinMembers:[{id:"int",nicname:"string",color:"string"},{id:"int",nicname:"string",color:"string"},{id:"int",nicname:"string",color:"string"}]},getters:{isDay(e){return e.isDay},missionClass(e){return e.missionClass},missionCnt(e){return e.missionCnt},ifWin(e){return e.ifWin},gameResult(e){return e.gameResult},absoluteTime(e){return e.absoluteTime},job(e){return e.job},joinMembers(e){return e.joinMembers}},mutations:{SET_GAMERESULT:(e,t)=>e.gameResult=t,SET_IFWIN:(e,t)=>e.ifWin=t,SET_MISSIONCNT:(e,t)=>e.missionCnt=t,SET_MISSIONCLASS:(e,t)=>e.missionClass=t,SET_ISDAY:(e,t)=>e.isDay=t},actions:{setJoinMembers({commit:e},t){e("SET_JOINMEMBERS",t)},setGameResult({commit:e},t){e("SET_GAMERESULT",t)},setIfWin({commit:e},t){e("SET_IFWIN",t)},setMissionCnt({commit:e},t){e("SET_MISSIONCNT",t)},setMissionClass({commit:e},t){e("SET_MISSIONCLASS",t)},setIsDay({commit:e},t){e("SET_ISDAY",t)}}};var Wl=Gl,Al=(0,k.MT)({modules:{memberStore:Sl,lobbyStore:Dl,roomdataStore:Pl,mypageStore:$l,ingameStore:Wl},plugins:[(0,ul.Z)({storage:sessionStorage})]});(0,o.ri)(c).use(Al).use(hl).mount("#app")},5410:function(){},8628:function(){},1601:function(){},7792:function(){},4977:function(){},5042:function(){}},t={};function s(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,function(){s.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){s.amdO={}}(),function(){var e=[];s.O=function(t,o,i,n){if(!o){var a=1/0;for(d=0;d<e.length;d++){o=e[d][0],i=e[d][1],n=e[d][2];for(var r=!0,l=0;l<o.length;l++)(!1&n||a>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[l])}))?o.splice(l--,1):(r=!1,n<a&&(a=n));if(r){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[o,i,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,n,a=o[0],r=o[1],l=o[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var d=l(s)}for(t&&t(o);c<a.length;c++)n=a[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},o=self["webpackChunkmafia"]=self["webpackChunkmafia"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(7269)}));o=s.O(o)})();
//# sourceMappingURL=app.6478f81f.js.map